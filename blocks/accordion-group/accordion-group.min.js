import{ctaClick as l,ctaClickInteraction as i,documentRequiredInteraction as u,faqInteraction as f}from"../../dl.min.js";import{fetchPlaceholders as m}from"../../scripts/aem.min.js";import{targetObject as d}from"../../scripts/scripts.min.js";import{documentRequired as p,generateAccordionDOM as q}from"../accordion/accordion.min.js";const h=[];export default async function y(o){const c=await m();[...[...o.children]].forEach(t=>{const n=q(t);if(t.textContent="",t.classList.add("accordion","block"),t.append(n),t.closest(".section.faq-section-wrapper")){let r=t?.querySelector("summary >div >p")?.textContent?.trim()||"",a=(t?.querySelector("details >div")?.textContent?.trim()||"")?.replace(/\s+/g," ")?.trim()?.replace(/\n/g," ")||"";h.push({"@type":"Question",name:r,acceptedAnswer:{"@type":"Answer",text:a}})}try{C(n)}catch(r){console.warn(r)}}),o.classList.add("shade-box");try{x(o),o.closest(".faq-view-more-logic")&&w(),document.querySelector(".documents-required-brown")&&p()}catch(t){console.warn(t)}}function x(o){const c=o.querySelectorAll("details summary");c.forEach(e=>{e.addEventListener("click",function(){if(this.classList.contains("active"))setTimeout(()=>{this.closest("details").removeAttribute("open")}),this.classList.remove("active");else{c.forEach(t=>{t.closest("details").removeAttribute("open"),t.classList.remove("active")});try{const t={};if(e.closest(".documents-required-brown")){t.click_text=e.querySelector("h3").textContent.trim(),u(t);const n=e.querySelector("h3").textContent.trim(),r="",s=e.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim();l(n,s,r,d.pageName)}else t.click_text=e.textContent.trim(),f(t)}catch(t){console.warn(t)}this.classList.toggle("active")}})})}function w(){document.querySelectorAll(".faq-section-wrapper.faq-view-more-logic").forEach(o=>{o.querySelectorAll(".accordion.block").forEach((t,n)=>{n==5&&t.classList.add("faq-blur"),t.classList.toggle("dp-none",n>5)});const e=o.querySelector(".button-container");if(e){const t=e.querySelector("a").textContent.trim();e.innerHTML=t,S(o)}})}function S(o){o.querySelector(".faq-section-wrapper .button-container").addEventListener("click",function(){try{const t={};t.click_text=this.textContent.trim(),t.cta_position=this.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim(),i(t)}catch(t){console.warn(t)}const e=this.textContent.toLowerCase()==="view more";this.innerText=e?"View Less":"View More",o.querySelectorAll(".accordion.block").forEach((t,n)=>{n==5&&(t.classList.contains("faq-blur")?t.classList.remove("faq-blur"):t.classList.add("faq-blur")),t.classList.toggle("dp-none",!e&&n>5)})})}function C(o){o.querySelectorAll("ul > li > a").forEach(c=>{c.addEventListener("click",function(){const e={};e.click_text=this.textContent.trim(),e.cta_position=this.closest(".accordion").querySelector("summary").textContent.trim(),i(e)})})}function b(o){let c={"@context":"https://schema.org","@type":"FAQPage",mainEntity:o};const e=document.createElement("script");e.type="application/ld+json",e.innerHTML=JSON.stringify(c)||"",document.head.append(e)}
