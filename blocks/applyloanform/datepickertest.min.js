export default function(){return window.AirDatepicker}(function(Y,F){typeof exports=="object"&&typeof module=="object"?module.exports=F():typeof define=="function"&&define.amd?define([],F):typeof exports=="object"?exports.AirDatepicker=window.AirDatepicker=F():window.AirDatepicker=F()})(void 0,()=>function(){var Y={d(o,t){for(const e in t)Y.o(t,e)&&!Y.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:t[e]})},o(o,t){return Object.prototype.hasOwnProperty.call(o,t)}};const F={};Y.d(F,{default(){return T}});const c={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},Q={classes:"",inline:!1,locale:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u043E\u0441","\u041F\u043E\u043D","\u0412\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u044F\u0442","\u0421\u0443\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:c.days,minView:c.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function y(o){const t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof o=="string"?t.querySelector(o):o}function b(){const{tagName:o="div",className:t="",innerHtml:e="",id:s="",attrs:a={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=document.createElement(o);return t&&n.classList.add(...t.split(" ")),s&&(n.id=s),e&&(n.innerHTML=e),a&&q(n,a),n}function q(o,t){for(const[e,s]of Object.entries(t))s!==void 0&&o.setAttribute(e,s);return o}function Z(o){return new Date(o.getFullYear(),o.getMonth()+1,0).getDate()}function v(o){const t=o.getHours(),{hours:e,dayPeriod:s}=tt(t);return{year:o.getFullYear(),month:o.getMonth(),fullMonth:o.getMonth()+1<10?`0${o.getMonth()+1}`:o.getMonth()+1,date:o.getDate(),fullDate:o.getDate()<10?`0${o.getDate()}`:o.getDate(),day:o.getDay(),hours:t,fullHours:O(t),hours12:e,dayPeriod:s,fullHours12:O(e),minutes:o.getMinutes(),fullMinutes:o.getMinutes()<10?`0${o.getMinutes()}`:o.getMinutes()}}function tt(o){return{dayPeriod:o>11?"pm":"am",hours:o%12==0?12:o%12}}function O(o){return o<10?`0${o}`:o}function V(o){const t=10*Math.floor(o.getFullYear()/10);return[t,t+9]}function _(){const o=[];for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.forEach(a=>{if(typeof a=="object")for(const n in a)a[n]&&o.push(n);else a&&o.push(a)}),o.join(" ")}function D(o,t){const e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.days;if(!o||!t)return!1;const s=v(o),a=v(t);return{[c.days]:s.date===a.date&&s.month===a.month&&s.year===a.year,[c.months]:s.month===a.month&&s.year===a.year,[c.years]:s.year===a.year}[e]}function M(o,t,e){const s=G(o,!1).getTime(),a=G(t,!1).getTime();return e?s>=a:s>a}function A(o,t){return!M(o,t,!0)}function G(o){const t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],e=new Date(o.getTime());return typeof t!="boolean"||t||at(e),e}function at(o){return o.setHours(0,0,0,0),o}function w(o,t,e){o.length?o.forEach(s=>{s.addEventListener(t,e)}):o.addEventListener(t,e)}function R(o,t){return!(!o||o===document||o instanceof DocumentFragment)&&(o.matches(t)?o:R(o.parentNode,t))}function N(o,t,e){return o>e?e:o<t?t:o}function W(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];return e.filter(a=>a).forEach(a=>{for(const[n,i]of Object.entries(a))if(i!==void 0&&i.toString()==="[object Object]"){const r=o[n]!==void 0?o[n].toString():void 0,h=i.toString(),l=Array.isArray(i)?[]:{};o[n]=o[n]?r!==h?l:o[n]:l,W(o[n],i)}else o[n]=i}),o}function k(o){let t=o;return o instanceof Date||(t=new Date(o)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${o}" to Date object`),t=!1),t}function J(o){const t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp(`(^|>|${t})(${o})($|<|${t})`,"g")}function x(o,t,e){return(t=function(s){const a=function(n,i){if(typeof n!="object"||n===null)return n;const r=n[Symbol.toPrimitive];if(r!==void 0){const h=r.call(n,i);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(s,"string");return typeof a=="symbol"?a:String(a)}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}class rt{constructor(){const{type:t,date:e,dp:s,opts:a,body:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};x(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),x(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),x(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),x(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),x(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),x(this,"onChangeFocusDate",i=>{if(!i)return void(this.focused&&this.removeFocus());const r=D(i,this.date,this.type);r?this.focus():!r&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),x(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=t,this.singleType=this.type.slice(0,-1),this.date=e,this.dp=s,this.opts=a,this.body=n,this.customData=!1,this.init()}init(){const{range:t,onRenderCell:e}=this.opts;e&&(this.customData=e({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),t&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(c.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(c.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(c.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(c.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){let t;const{year:e,month:s,date:a}=v(this.date),n=((t=this.customData)===null||t===void 0?void 0:t.attrs)||{};this.$cell=b({className:this._getClassName(),attrs:{"data-year":e,"data-month":s,"data-date":a,...n}})}_getClassName(){let t,e;const s=new Date,{selectOtherMonths:a,selectOtherYears:n}=this.opts,{minDate:i,maxDate:r}=this.dp,{day:h}=v(this.date),l=this._isOutOfMinMaxRange(),d=(t=this.customData)===null||t===void 0?void 0:t.disabled,u=_("air-datepicker-cell",`-${this.singleType}-`,{"-current-":D(s,this.date,this.type),"-min-date-":i&&D(i,this.date,this.type),"-max-date-":r&&D(r,this.date,this.type)});let p="";switch(this.type){case c.days:p=_({"-weekend-":this.dp.isWeekend(h),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!a||l||d});break;case c.months:p=_({"-disabled-":l||d});break;case c.years:p=_({"-other-decade-":this.isOtherDecade,"-disabled-":l||this.isOtherDecade&&!n||d})}return _(u,p,(e=this.customData)===null||e===void 0?void 0:e.classes)}_getHtml(){let t;const{year:e,month:s,date:a}=v(this.date),{showOtherMonths:n,showOtherYears:i}=this.opts;if((t=this.customData)!==null&&t!==void 0&&t.html)return this.customData.html;switch(this.type){case c.days:return!n&&this.isOtherMonth?"":a;case c.months:return this.dp.locale[this.opts.monthsField][s];case c.years:return!i&&this.isOtherDecade?"":e}}_isOutOfMinMaxRange(){const{minDate:t,maxDate:e}=this.dp,{type:s,date:a}=this,{month:n,year:i,date:r}=v(a),h=s===c.days,l=s===c.years,d=!!t&&new Date(i,l?t.getMonth():n,h?r:t.getDate()),u=!!e&&new Date(i,l?e.getMonth():n,h?r:e.getDate());return t&&e?A(d,t)||M(u,e):t?A(d,t):e?M(u,e):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{rangeDateFrom:t,rangeDateTo:e}=this.dp,s=_({"-in-range-":t&&e&&(a=this.date,n=t,i=e,M(a,n)&&A(a,i)),"-range-from-":t&&D(this.date,t,this.type),"-range-to-":e&&D(this.date,e,this.type)});let a,n,i;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),s&&this.$cell.classList.add(...s.split(" "))}_handleSelectedStatus(){const t=this.dp._checkIfDateIsSelected(this.date,this.type);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){D(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function $(o,t,e){return(t=function(s){const a=function(n,i){if(typeof n!="object"||n===null)return n;const r=n[Symbol.toPrimitive];if(r!==void 0){const h=r.call(n,i);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(s,"string");return typeof a=="symbol"?a:String(a)}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}const ot={[c.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${c.days}-"></div>`,[c.months]:`<div class="air-datepicker-body--cells -${c.months}-"></div>`,[c.years]:`<div class="air-datepicker-body--cells -${c.years}-"></div>`},B=".air-datepicker-cell";class et{constructor(t){const{dp:e,type:s,opts:a}=t;$(this,"handleClick",n=>{const i=n.target.closest(B).adpCell;if(i.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();const r=this.dp._checkIfDateIsSelected(i.date,i.type);r?this.dp._handleAlreadySelectedDates(r,i.date):this.dp.selectDate(i.date)}),$(this,"handleDayNameClick",n=>{const i=n.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(i),datepicker:this.dp})}),$(this,"onChangeCurrentView",n=>{n!==this.type?this.hide():(this.show(),this.render())}),$(this,"onMouseOverCell",n=>{const i=R(n.target,B);this.dp.setFocusDate(!!i&&i.adpCell.date)}),$(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),$(this,"onClickBody",n=>{const{onClickDayName:i}=this.opts,r=n.target;r.closest(B)&&this.handleClick(n),i&&r.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(n)}),$(this,"onMouseDown",n=>{this.pressed=!0;const i=R(n.target,B),r=i&&i.adpCell;D(r.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),D(r.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),$(this,"onMouseMove",n=>{if(!this.pressed||!this.dp.isMinViewReached)return;n.preventDefault();const i=R(n.target,B),r=i&&i.adpCell,{selectedDates:h,rangeDateTo:l,rangeDateFrom:d}=this.dp;if(!r||r.isDisabled)return;const{date:u}=r;if(h.length===2){if(this.rangeFromFocused&&!M(u,l)){const{hours:p,minutes:g}=v(d);u.setHours(p),u.setMinutes(g),this.dp.rangeDateFrom=u,this.dp.replaceDate(d,u)}if(this.rangeToFocused&&!A(u,d)){const{hours:p,minutes:g}=v(l);u.setHours(p),u.setMinutes(g),this.dp.rangeDateTo=u,this.dp.replaceDate(l,u)}}}),$(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),$(this,"onChangeViewDate",(n,i)=>{if(!this.isVisible)return;const r=V(n),h=V(i);switch(this.dp.currentView){case c.days:if(D(n,i,c.months))return;break;case c.months:if(D(n,i,c.years))return;break;case c.years:if(r[0]===h[0]&&r[1]===h[1])return}this.render()}),$(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(n=>{this.$cells.appendChild(n.render())})}),this.dp=e,this.type=s,this.opts=a,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===c.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){const{range:t,dynamicRange:e}=this.opts;w(this.$el,"mouseover",this.onMouseOverCell),w(this.$el,"mouseout",this.onMouseOutCell),w(this.$el,"click",this.onClickBody),t&&e&&(w(this.$el,"mousedown",this.onMouseDown),w(this.$el,"mousemove",this.onMouseMove),w(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(c.eventChangeViewDate,this.onChangeViewDate),this.dp.on(c.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=b({className:`air-datepicker-body -${this.type}-`,innerHtml:ot[this.type]}),this.$names=y(".air-datepicker-body--day-names",this.$el),this.$cells=y(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){const t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay;let e="";const s=this.dp.isWeekend,{onClickDayName:a}=this.opts;let n=t,i=0;for(;i<7;){const r=n%7;e+=`<div class="${_("air-datepicker-body--day-name",{[c.cssClassWeekend]:s(r),"-clickable-":!!a})}" data-day-index='${r}'>${this.dp.locale.daysMin[r]}</div>`,i++,n++}return e}_getDaysCells(){const{viewDate:t,locale:{firstDay:e}}=this.dp,s=Z(t),{year:a,month:n}=v(t),i=new Date(a,n,1),r=new Date(a,n,s);let h=i.getDay()-e,l=6-r.getDay()+e;h=h<0?h+7:h,l=l>6?l-7:l;const d=function(P,K){const{year:U,month:j,date:z}=v(P);return new Date(U,j,z-K)}(i,h),u=s+h+l,p=d.getDate(),{year:g,month:f}=v(d);let C=0;for(;C<u;){const P=new Date(g,f,p+C);this._generateCell(P),C++}}_generateCell(t){const{type:e,dp:s,opts:a}=this,n=new rt({type:e,dp:s,opts:a,date:t,body:this});return this.cells.push(n),n}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){const{year:t}=this.dp.parsedViewDate;let e=0;for(;e<12;)this.cells.push(this._generateCell(new Date(t,e))),e++}_generateYearCells(){const t=V(this.dp.viewDate),e=t[0]-1,s=t[1]+1;let a=e;for(;a<=s;)this.cells.push(this._generateCell(new Date(a,0))),a++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case c.days:this._generateDayCells();break;case c.months:this._generateMonthCells();break;case c.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(t=>t.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(c.eventChangeViewDate,this.onChangeViewDate),this.dp.off(c.eventChangeCurrentView,this.onChangeCurrentView)}}function H(o,t,e){return(t=function(s){const a=function(n,i){if(typeof n!="object"||n===null)return n;const r=n[Symbol.toPrimitive];if(r!==void 0){const h=r.call(n,i);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(s,"string");return typeof a=="symbol"?a:String(a)}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}class ht{constructor(t){const{dp:e,opts:s}=t;H(this,"onClickNav",a=>{const n=R(a.target,".air-datepicker-nav--action");if(!n)return;const i=n.dataset.action;this.dp[i]()}),H(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),H(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),H(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),H(this,"update",()=>{const{prevHtml:a,nextHtml:n}=this.opts;this.$prev.innerHTML=a,this.$next.innerHTML=n,this._resetNavStatus(),this.render(),this.handleNavStatus()}),H(this,"renderDelay",()=>{setTimeout(this.render)}),H(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(a,n){for(const i in n)n[i]?a.classList.add(i):a.classList.remove(i)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=e,this.opts=s,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=y(".air-datepicker-nav--title",this.$el),this.$prev=y('[data-action="prev"]',this.$el),this.$next=y('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(c.eventChangeViewDate,this.onChangeViewDate),this.dp.on(c.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(c.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(c.eventChangeTime,this.render))}destroy(){this.dp.off(c.eventChangeViewDate,this.onChangeViewDate),this.dp.off(c.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(c.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(c.eventChangeTime,this.render))}_createElement(){this.$el=b({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){const{dp:t,opts:e}=this,s=e.navTitles[t.currentView];return typeof s=="function"?s(t):t.formatDate(t.viewDate,s)}handleNavStatus(){const{disableNavWhenOutOfRange:t}=this.opts,{minDate:e,maxDate:s}=this.dp;if(!e&&!s||!t)return;const{year:a,month:n}=this.dp.parsedViewDate,i=!!e&&v(e),r=!!s&&v(s);switch(this.dp.currentView){case c.days:e&&i.month>=n&&i.year>=a&&this._disableNav("prev"),s&&r.month<=n&&r.year<=a&&this._disableNav("next");break;case c.months:e&&i.year>=a&&this._disableNav("prev"),s&&r.year<=a&&this._disableNav("next");break;case c.years:{const h=V(this.dp.viewDate);e&&i.year>=h[0]&&this._disableNav("prev"),s&&r.year<=h[1]&&this._disableNav("next");break}}}_disableNav(t){y(`[data-action="${t}"]`,this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];t.length?t.forEach(n=>{n.classList.remove(...s)}):t.classList.remove(...s)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){const{prevHtml:t,nextHtml:e}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${t}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${e}</div>`}get isNavIsFunction(){const{navTitles:t}=this.opts;return Object.keys(t).find(e=>typeof t[e]=="function")}}const st={today:{content:o=>o.locale.today,onClick:o=>o.setViewDate(new Date)},clear:{content:o=>o.locale.clear,onClick:o=>o.clear()}};class ct{constructor(t){const{dp:e,opts:s}=t;this.dp=e,this.opts=s,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=b({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:t}=this.opts;Array.isArray(t)||(t=[t]),t.forEach(e=>{let s=e;typeof e=="string"&&st[e]&&(s=st[e]);const a=this.createButton(s);s.onClick&&this.attachEventToButton(a,s.onClick),this.$el.appendChild(a)})}attachEventToButton(t,e){t.addEventListener("click",()=>{e(this.dp)})}createButton(t){const{content:e,className:s,tagName:a="button",attrs:n={}}=t;return b({tagName:a,innerHtml:`<span tabindex='-1'>${typeof e=="function"?e(this.dp):e}</span>`,className:_("air-datepicker-button",s),attrs:n})}render(){this.generateButtons()}}function E(o,t,e){return(t=function(s){const a=function(n,i){if(typeof n!="object"||n===null)return n;const r=n[Symbol.toPrimitive];if(r!==void 0){const h=r.call(n,i);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(s,"string");return typeof a=="symbol"?a:String(a)}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}class lt{constructor(){const{opts:t,dp:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};E(this,"toggleTimepickerIsActive",a=>{this.dp.timepickerIsActive=a}),E(this,"onChangeSelectedDate",a=>{const{date:n,updateTime:i=!1}=a;n&&(this.setMinMaxTime(n),this.setCurrentTime(!!i&&n),this.addTimeToDate(n))}),E(this,"onChangeLastSelectedDate",a=>{a&&(this.setTime(a),this.render())}),E(this,"onChangeInputRange",a=>{const n=a.target;this[n.getAttribute("name")]=n.value,this.updateText(),this.dp.trigger(c.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),E(this,"onMouseEnterLeave",a=>{const n=a.target.getAttribute("name");let i=this.$minutesText;n==="hours"&&(i=this.$hoursText),i.classList.toggle("-focus-")}),E(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),E(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=t,this.dp=e;const{timeFormat:s}=this.dp.locale;s&&(s.match(J("h"))||s.match(J("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(c.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(c.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let t="input";navigator.userAgent.match(/trident/gi)&&(t="change"),w(this.$ranges,t,this.onChangeInputRange),w(this.$ranges,"mouseenter",this.onMouseEnterLeave),w(this.$ranges,"mouseleave",this.onMouseEnterLeave),w(this.$ranges,"focus",this.onFocus),w(this.$ranges,"mousedown",this.onFocus),w(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=b({className:_("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(c.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(c.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){const{ampm:t,hours:e,displayHours:s,minutes:a,minHours:n,minMinutes:i,maxHours:r,maxMinutes:h,dayPeriod:l,opts:{hoursStep:d,minutesStep:u}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${O(s)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${O(a)}</span>   ${t?`<span class='air-datepicker-time--current-ampm'>${l}</span>`:""}</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${e}" min="${n}" max="${r}" step="${d}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${a}" min="${i}" max="${h}" step="${u}"/>   </div></div>`}defineDOM(){const t=e=>y(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=t('[name="hours"]'),this.$minutes=t('[name="minutes"]'),this.$hoursText=t(".air-datepicker-time--current-hours"),this.$minutesText=t(".air-datepicker-time--current-minutes"),this.$ampm=t(".air-datepicker-time--current-ampm")}setTime(t){this.setMinMaxTime(t),this.setCurrentTime(t)}addTimeToDate(t){t&&(t.setHours(this.hours),t.setMinutes(this.minutes))}setMinMaxTime(t){if(this.setMinMaxTimeFromOptions(),t){const{minDate:e,maxDate:s}=this.dp;e&&D(t,e)&&this.setMinTimeFromMinDate(e),s&&D(t,s)&&this.setMaxTimeFromMaxDate(s)}}setCurrentTime(t){const{hours:e,minutes:s}=t?v(t):this;this.hours=N(e,this.minHours,this.maxHours),this.minutes=N(s,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){const{minHours:t,minMinutes:e,maxHours:s,maxMinutes:a}=this.opts;this.minHours=N(t,0,23),this.minMinutes=N(e,0,59),this.maxHours=N(s,0,23),this.maxMinutes=N(a,0,59)}setMinTimeFromMinDate(t){const{lastSelectedDate:e}=this.dp;this.minHours=t.getHours(),e&&e.getHours()>t.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=t.getMinutes()}setMaxTimeFromMaxDate(t){const{lastSelectedDate:e}=this.dp;this.maxHours=t.getHours(),e&&e.getHours()<t.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=t.getMinutes()}updateSliders(){q(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,q(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=O(this.displayHours),this.$minutesText.innerHTML=O(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(t){this._hours=t;const{hours:e,dayPeriod:s}=tt(t);this.displayHours=this.ampm?e:t,this.dayPeriod=s}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function L(o,t,e){return(t=function(s){const a=function(n,i){if(typeof n!="object"||n===null)return n;const r=n[Symbol.toPrimitive];if(r!==void 0){const h=r.call(n,i);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(s,"string");return typeof a=="symbol"?a:String(a)}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}class dt{constructor(t){const{dp:e,opts:s}=t;L(this,"pressedKeys",new Set),L(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],a=>a.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],a=>a.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],a=>a.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],a=>a.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],a=>a.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],a=>a.year-=10],[["Control","Shift","ArrowUp"],(a,n)=>n.up()]])),L(this,"handleHotKey",a=>{const n=this.hotKeys.get(a),i=v(this.getInitialFocusDate());n(i,this.dp);let{year:r,month:h,date:l}=i;const d=Z(new Date(r,h));d<l&&(l=d);const u=this.dp.getClampedDate(new Date(r,h,l));this.dp.setFocusDate(u,{viewDateTransition:!0})}),L(this,"isHotKeyPressed",()=>{let a=!1;const n=this.pressedKeys.size,i=r=>this.pressedKeys.has(r);for(const[r]of this.hotKeys){if(a)break;if(Array.isArray(r[0]))r.forEach(h=>{a||n!==h.length||(a=h.every(i)&&r)});else{if(n!==r.length)continue;a=r.every(i)&&r}}return a}),L(this,"isArrow",a=>a>=37&&a<=40),L(this,"onKeyDown",a=>{const{key:n,which:i}=a,{dp:r,dp:{focusDate:h},opts:l}=this;this.registerKey(n);const d=this.isHotKeyPressed();if(d)return a.preventDefault(),void this.handleHotKey(d);if(this.isArrow(i))return a.preventDefault(),void this.focusNextCell(n);if(n==="Enter"){if(r.currentView!==l.minView)return void r.down();if(h){const u=r._checkIfDateIsSelected(h);return void(u?r._handleAlreadySelectedDates(u,h):r.selectDate(h))}}n==="Escape"&&this.dp.hide()}),L(this,"onKeyUp",a=>{this.removeKey(a.key)}),this.dp=e,this.opts=s,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){const{$el:t}=this.dp;t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){const{$el:t}=this.dp;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){const{focusDate:t,currentView:e,selectedDates:s,parsedViewDate:{year:a,month:n}}=this.dp,i=t||s[s.length-1];if(!i)switch(e){case c.days:i=new Date(a,n,new Date().getDate());break;case c.months:i=new Date(a,n,1);break;case c.years:i=new Date(a,0,1)}return i}focusNextCell(t){const e=this.getInitialFocusDate(),{currentView:s}=this.dp,{days:a,months:n,years:i}=c,r=v(e);let h=r.year,l=r.month,d=r.date;switch(t){case"ArrowLeft":s===a&&(d-=1),s===n&&(l-=1),s===i&&(h-=1);break;case"ArrowUp":s===a&&(d-=7),s===n&&(l-=3),s===i&&(h-=4);break;case"ArrowRight":s===a&&(d+=1),s===n&&(l+=1),s===i&&(h+=1);break;case"ArrowDown":s===a&&(d+=7),s===n&&(l+=3),s===i&&(h+=4)}const u=this.dp.getClampedDate(new Date(h,l,d));this.dp.setFocusDate(u,{viewDateTransition:!0})}registerKey(t){this.pressedKeys.add(t)}removeKey(t){this.pressedKeys.delete(t)}}const ut={on(o,t){this.__events||(this.__events={}),this.__events[o]?this.__events[o].push(t):this.__events[o]=[t]},off(o,t){this.__events&&this.__events[o]&&(this.__events[o]=this.__events[o].filter(e=>e!==t))},removeAllEvents(){this.__events={}},trigger(o){for(var t=arguments.length,e=new Array(t>1?t-1:0),s=1;s<t;s++)e[s-1]=arguments[s];this.__events&&this.__events[o]&&this.__events[o].forEach(a=>{a(...e)})}};function m(o,t,e){return(t=function(s){const a=function(n,i){if(typeof n!="object"||n===null)return n;const r=n[Symbol.toPrimitive];if(r!==void 0){const h=r.call(n,i);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(s,"string");return typeof a=="symbol"?a:String(a)}(t))in o?Object.defineProperty(o,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[t]=e,o}let I="",S="",X=!1;class T{static buildGlobalContainer(t){X=!0,I=b({className:t,id:t}),y("body").appendChild(I)}constructor(t,e){const s=this;if(m(this,"viewIndexes",[c.days,c.months,c.years]),m(this,"next",()=>{const{year:i,month:r}=this.parsedViewDate;switch(this.currentView){case c.days:this.setViewDate(new Date(i,r+1,1));break;case c.months:this.setViewDate(new Date(i+1,r,1));break;case c.years:this.setViewDate(new Date(i+10,0,1))}}),m(this,"prev",()=>{const{year:i,month:r}=this.parsedViewDate;switch(this.currentView){case c.days:this.setViewDate(new Date(i,r-1,1));break;case c.months:this.setViewDate(new Date(i-1,r,1));break;case c.years:this.setViewDate(new Date(i-10,0,1))}}),m(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),m(this,"setPosition",function(i){const r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(i=i||s.opts.position)=="function")return void(s.customHide=i({$datepicker:s.$datepicker,$target:s.$el,$pointer:s.$pointer,isViewChange:r,done:s._finishHide}));let h,l;const{isMobile:d}=s.opts,u=s.$el.getBoundingClientRect();let p=s.$el.getBoundingClientRect();const g=s.$datepicker.offsetParent,f=s.$el.offsetParent,C=s.$datepicker.getBoundingClientRect(),P=i.split(" ");let K=window.scrollY,U=window.scrollX;const j=s.opts.offset,z=P[0],pt=P[1];if(d)s.$datepicker.style.cssText="left: 50%; top: 50%";else{if(g===f&&g!==document.body&&(p={top:s.$el.offsetTop,left:s.$el.offsetLeft,width:u.width,height:s.$el.offsetHeight},K=0,U=0),g!==f&&g!==document.body){const nt=g.getBoundingClientRect();p={top:u.top-nt.top,left:u.left-nt.left,width:u.width,height:u.height},K=0,U=0}switch(z){case"top":h=p.top-C.height-j;break;case"right":l=p.left+p.width+j;break;case"bottom":h=p.top+p.height+j;break;case"left":l=p.left-C.width-j}switch(pt){case"top":h=p.top;break;case"right":l=p.left+p.width-C.width;break;case"bottom":h=p.top+p.height-C.height;break;case"left":l=p.left;break;case"center":/left|right/.test(z)?h=p.top+p.height/2-C.height/2:l=p.left+p.width/2-C.width/2}s.$datepicker.style.cssText=`left: ${l+U}px; top: ${h+K}px`}}),m(this,"_setInputValue",()=>{const{opts:i,$altField:r,locale:{dateFormat:h}}=this,{altFieldDateFormat:l,altField:d}=i;d&&r&&(r.value=this._getInputValue(l)),this.$el.value=this._getInputValue(h)}),m(this,"_getInputValue",i=>{const{selectedDates:r,opts:h}=this,{multipleDates:l,multipleDatesSeparator:d}=h;if(!r.length)return"";const u=typeof i=="function";let p=u?i(l?r:r[0]):r.map(g=>this.formatDate(g,i));return p=u?p:p.join(d),p}),m(this,"_checkIfDateIsSelected",function(i){const r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.days;let h=!1;return s.selectedDates.some(l=>{const d=D(i,l,r);return h=d&&l,d}),h}),m(this,"_scheduleCallAfterTransition",i=>{this._cancelScheduledCall(),i&&i(!1),this._onTransitionEnd=()=>{i&&i(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),m(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),m(this,"setViewDate",i=>{if(!((i=k(i))instanceof Date)||D(i,this.viewDate))return;const r=this.viewDate;this.viewDate=i;const{onChangeViewDate:h}=this.opts;if(h){const{month:l,year:d}=this.parsedViewDate;h({month:l,year:d,decade:this.curDecade})}this.trigger(c.eventChangeViewDate,i,r)}),m(this,"setFocusDate",function(i){const r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!i||(i=k(i))instanceof Date)&&(s.focusDate=i,s.opts.range&&i&&s._handleRangeOnFocus(),s.trigger(c.eventChangeFocusDate,i,r))}),m(this,"setCurrentView",i=>{if(this.viewIndexes.includes(i)){if(this.currentView=i,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(c.eventChangeCurrentView,i),!this.views[i]){const r=this.views[i]=new et({dp:this,opts:this.opts,type:i});this.shouldUpdateDOM&&this.$content.appendChild(r.$el)}this.opts.onChangeView&&this.opts.onChangeView(i)}}),m(this,"_updateLastSelectedDate",i=>{this.lastSelectedDate=i,this.trigger(c.eventChangeLastSelectedDate,i)}),m(this,"destroy",()=>{const{showEvent:i,isMobile:r}=this.opts,h=this.$datepicker.parentNode;h&&h.removeChild(this.$datepicker),this.$el.removeEventListener(i,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),r&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),m(this,"update",i=>{const r=W({},this.opts);W(this.opts,i);const{timepicker:h,buttons:l,range:d,selectedDates:u,isMobile:p}=this.opts,g=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!r.selectedDates&&u&&this.selectDate(u),i.view&&this.setCurrentView(i.view),this._setInputValue(),r.range&&!d?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!r.range&&d&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),r.timepicker&&!h?(g&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!r.timepicker&&h&&this._addTimepicker(),!r.buttons&&l?this._addButtons():r.buttons&&!l?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):g&&r.buttons&&l&&this.buttons.clearHtml().render(),!r.isMobile&&p?(this.treatAsInline||S||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):r.isMobile&&!p&&(this._removeMobileAttributes(),this.visible&&(S.classList.remove("-active-"),typeof this.opts.position!="function"&&this.setPosition())),g&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===c.days&&this.views[this.currentView].renderDayNames())}),m(this,"isOtherMonth",i=>{const{month:r}=v(i);return r!==this.parsedViewDate.month}),m(this,"isOtherYear",i=>{const{year:r}=v(i);return r!==this.parsedViewDate.year}),m(this,"isOtherDecade",i=>{const{year:r}=v(i),[h,l]=V(this.viewDate);return r<h||r>l}),m(this,"_onChangeSelectedDate",i=>{const{silent:r}=i;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!r&&this._triggerOnSelect()})}),m(this,"_onChangeFocusedDate",function(i){const{viewDateTransition:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!i)return;let h=!1;r&&(h=s.isOtherMonth(i)||s.isOtherYear(i)||s.isOtherDecade(i)),h&&s.setViewDate(i)}),m(this,"_onChangeTime",i=>{const{hours:r,minutes:h}=i,l=new Date,{lastSelectedDate:d,opts:{onSelect:u}}=this;let p=d;d||(p=l);const g=this.getCell(p,this.currentViewSingular),f=g&&g.adpCell;f&&f.isDisabled||(p.setHours(r),p.setMinutes(h),d?(this._setInputValue(),u&&this._triggerOnSelect()):this.selectDate(p))}),m(this,"_onFocus",i=>{this.visible||this.show()}),m(this,"_onBlur",i=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),m(this,"_onMouseDown",i=>{this.inFocus=!0}),m(this,"_onMouseUp",i=>{this.inFocus=!1,this.$el.focus()}),m(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),m(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),m(this,"isWeekend",i=>this.opts.weekends.includes(i)),m(this,"getClampedDate",i=>{const{minDate:r,maxDate:h}=this;let l=i;return h&&M(i,h)?l=h:r&&A(i,r)&&(l=r),l}),this.$el=y(t),!this.$el)return;this.$datepicker=b({className:"air-datepicker"}),this.opts=W({},Q,e),this.$customContainer=!!this.opts.container&&y(this.opts.container),this.$altField=y(this.opts.altField||!1);const{view:a,startDate:n}=this.opts;n||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=k(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=a,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){const{opts:t,treatAsInline:e,opts:{inline:s,isMobile:a,selectedDates:n,keyboardNav:i,onlyTimepicker:r}}=this,h=y("body");(!X||X&&I&&!h.contains(I))&&!s&&this.elIsInput&&!this.$customContainer&&T.buildGlobalContainer(T.defaultGlobalContainerId),!a||S||e||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(s||this._bindEvents(),i&&!r&&(this.keyboardNav=new dt({dp:this,opts:t}))),n&&this.selectDate(n,{silent:!0}),this.opts.visible&&!e&&this.show(),a&&!e&&this.$el.setAttribute("readonly",!0),e&&this._createComponents()}_createMobileOverlay(){S=b({className:"air-datepicker-overlay"}),I.appendChild(S)}_createComponents(){const{opts:t,treatAsInline:e,opts:{inline:s,buttons:a,timepicker:n,position:i,classes:r,onlyTimepicker:h,isMobile:l}}=this;this._buildBaseHtml(),this.elIsInput&&(s||this._setPositionClasses(i)),!s&&this.elIsInput||this.$datepicker.classList.add("-inline-"),r&&this.$datepicker.classList.add(...r.split(" ")),h&&this.$datepicker.classList.add("-only-timepicker-"),l&&!e&&this._addMobileAttributes(),this.views[this.currentView]=new et({dp:this,type:this.currentView,opts:t}),this.nav=new ht({dp:this,opts:t}),n&&this._addTimepicker(),a&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(const t in this.views)this.views[t].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){S.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){S.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){const{minDate:t,maxDate:e}=this.opts;this.minDate=!!t&&k(t),this.maxDate=!!e&&k(e)}_addTimepicker(){this.$timepicker=b({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new lt({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=b({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new ct({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(c.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(c.eventChangeFocusDate,this._onChangeFocusedDate),this.on(c.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){const{inline:t}=this.opts;let e,s;this.elIsInput?t?(e=this.$datepicker,(s=this.$el).parentNode.insertBefore(e,s.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=y(".air-datepicker--content",this.$datepicker),this.$pointer=y(".air-datepicker--pointer",this.$datepicker),this.$nav=y(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){const{locale:t,dateFormat:e,firstDay:s,timepicker:a,onlyTimepicker:n,timeFormat:i,dateTimeSeparator:r}=this.opts;let h;this.locale=(h=t,JSON.parse(JSON.stringify(h))),e&&(this.locale.dateFormat=e),i!==void 0&&i!==""&&(this.locale.timeFormat=i);const{timeFormat:l}=this.locale;if(s!==""&&(this.locale.firstDay=s),a&&typeof e!="function"){const d=l?r:"";this.locale.dateFormat=[this.locale.dateFormat,l||""].join(d)}n&&typeof e!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(t){if(typeof t=="function")return void this.$datepicker.classList.add("-custom-position-");const e=(t=t.split(" "))[0],s=`air-datepicker -${e}-${t[1]}- -from-${e}-`;this.$datepicker.classList.add(...s.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){const{viewDate:t,minDate:e,maxDate:s}=this;s&&M(t,s)&&this.setViewDate(s),e&&A(t,e)&&this.setViewDate(e)}formatDate(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate;const e=arguments.length>1?arguments[1]:void 0;if(t=k(t),!(t instanceof Date))return;let s=e;const a=this.locale,n=v(t),i=n.dayPeriod,r=V(t),h=T.replacer,l={T:t.getTime(),m:n.minutes,mm:n.fullMinutes,h:n.hours12,hh:n.fullHours12,H:n.hours,HH:n.fullHours,aa:i,AA:i.toUpperCase(),E:a.daysShort[n.day],EEEE:a.days[n.day],d:n.date,dd:n.fullDate,M:n.month+1,MM:n.fullMonth,MMM:a.monthsShort[n.month],MMMM:a.months[n.month],yy:n.year.toString().slice(-2),yyyy:n.year,yyyy1:r[0],yyyy2:r[1]};for(const[d,u]of Object.entries(l))s=h(s,J(d),u);return s}down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let e;const s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:a,parsedViewDate:n,selectedDates:i}=this,{updateTime:r}=s,{moveToOtherMonthsOnSelect:h,moveToOtherYearsOnSelect:l,multipleDates:d,range:u,autoClose:p}=this.opts,g=i.length;if(Array.isArray(t))return t.forEach(f=>{this.selectDate(f,s)}),new Promise(f=>{setTimeout(f)});if((t=k(t))instanceof Date){if(a===c.days&&t.getMonth()!==n.month&&h&&(e=new Date(t.getFullYear(),t.getMonth(),1)),a===c.years&&t.getFullYear()!==n.year&&l&&(e=new Date(t.getFullYear(),0,1)),e&&this.setViewDate(e),d&&!u){if(g===d)return;this._checkIfDateIsSelected(t)||i.push(t)}else if(u)switch(g){case 1:i.push(t),this.rangeDateTo||(this.rangeDateTo=t),M(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=t),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[t],this.rangeDateFrom=t,this.rangeDateTo="";break;default:this.selectedDates=[t],this.rangeDateFrom=t}else this.selectedDates=[t];return this.trigger(c.eventChangeSelectedDate,{action:c.actionSelectDate,silent:s?.silent,date:t,updateTime:r}),this._updateLastSelectedDate(t),p&&!this.timepickerIsActive&&this.visible&&(d||u?u&&g===1&&this.hide():this.hide()),new Promise(f=>{setTimeout(f)})}}unselectDate(t){const e=this.selectedDates,s=this;if((t=k(t))instanceof Date)return e.some((a,n)=>{if(D(a,t))return e.splice(n,1),s.selectedDates.length?s._updateLastSelectedDate(s.selectedDates[s.selectedDates.length-1]):(s.rangeDateFrom="",s.rangeDateTo="",s._updateLastSelectedDate(!1)),this.trigger(c.eventChangeSelectedDate,{action:c.actionUnselectDate,date:t}),!0})}replaceDate(t,e){const s=this.selectedDates.find(n=>D(n,t,this.currentView)),a=this.selectedDates.indexOf(s);a<0||D(this.selectedDates[a],e,this.currentView)||(this.selectedDates[a]=e,this.trigger(c.eventChangeSelectedDate,{action:c.actionSelectDate,date:e,updateTime:!0}),this._updateLastSelectedDate(e))}clear(){const t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(c.eventChangeSelectedDate,{action:c.actionUnselectDate,silent:t.silent}),new Promise(e=>{setTimeout(e)})}show(){const{onShow:t,isMobile:e}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,t&&this._scheduleCallAfterTransition(t),e&&this._showMobileOverlay()}hide(){const{onHide:t,isMobile:e}=this.opts,s=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(a=>{!this.customHide&&(a&&s||!a&&!s)&&this._finishHide(),t&&t(a)}),e&&S.classList.remove("-active-")}_triggerOnSelect(){const t=[],e=[],{selectedDates:s,locale:a,opts:{onSelect:n,multipleDates:i,range:r}}=this,h=i||r,l=typeof a.dateFormat=="function";s.length&&(t=s.map(G),e=l?i?a.dateFormat(t):t.map(d=>a.dateFormat(d)):t.map(d=>this.formatDate(d,a.dateFormat))),n({date:h?t:t[0],formattedDate:h?e:e[0],datepicker:this})}_handleAlreadySelectedDates(t,e){const{range:s,toggleSelected:a}=this.opts;s?a?this.unselectDate(e):this.selectedDates.length!==2&&this.selectDate(e):a&&this.unselectDate(e),a||this._updateLastSelectedDate(t)}_handleUpDownActions(t,e){if(!((t=k(t||this.focusDate||this.viewDate))instanceof Date))return;let s=e==="up"?this.viewIndex+1:this.viewIndex-1;s>2&&(s=2),s<0&&(s=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1)),this.setCurrentView(this.viewIndexes[s])}_handleRangeOnFocus(){this.selectedDates.length===1&&(M(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(t){const e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.day;if(!((t=k(t))instanceof Date))return;const{year:s,month:a,date:n}=v(t),i=`[data-year="${s}"]`,r=`[data-month="${a}"]`,h={[c.day]:`${i}${r}[data-date="${n}"]`,[c.month]:`${i}${r}`,[c.year]:`${i}`};return this.views[this.currentView].$el.querySelector(h[e])}_showMobileOverlay(){S.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((t,e)=>parseFloat(e)+t,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return v(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return V(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===c.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===c.days}get $container(){return this.$customContainer||I}static replacer(t,e,s){return t.replace(e,(a,n,i,r)=>n+s+r)}}let it;return m(T,"defaults",Q),m(T,"version","3.3.5"),m(T,"defaultGlobalContainerId","air-datepicker-global-container"),it=T.prototype,Object.assign(it,ut),F.default}());
