import{workFlowStatemaster as u,stateMasterProcessApiData as d,stateMasterProcessGraphqlData as f}from"./statemasterbiz.min.js";import{fetchAPI as h}from"../../scripts/common.min.js";export function stateMasterApi(){const n=document.querySelector(".loan-form-sub-parent");let e=[];const r=document.querySelectorAll(".expert"),c=document.querySelector("#loan-banner .cmp-teaser__content .cmp-teaser__action-container .cmp-teaser__action-link"),s=document.querySelector(".cmp-container--documentrequired .cmp-container .extendedbutton"),l=document.getElementById("sticky-btn-loan-form"),i=document.querySelectorAll(".cmp-container--branches .cmp-contentfragmentlist .cmp-contentfragment .cmp-contentfragment__elements .cmp-contentfragment__element--ctaName .cmp-contentfragment__element-value"),a=document.querySelectorAll(".open-form-btn");e=[...r,c,s,l,...i,...a],e.filter(t=>t!=null).forEach(t=>{t.addEventListener("click",m=>{n.dataset.stateMaster!="true"&&(statemasterGetStatesApi().catch(p=>{console.warn(p)}),n.dataset.stateMaster=!0)})}),sessionStorage.removeItem("allowedType")}export function statemasterGetStatesApi(n){const e=["pl","las","lamf"].includes(n),r="/api/state-city-master/personal-loan-state-city-master.json",c=window.location.href.includes("localhost")?"https://www.piramalfinance.com/graphql/execute.json/piramalfinance/State%20City%20Master":"/graphql/execute.json/piramalfinance/State%20City%20Master",s=e?r:c;return new Promise((l,i)=>{let a="/graphql/execute.json/piramalfinance/State%20City%20Master";window.location.href.includes("localhost")&&(a="https://www.piramalfinance.com/graphql/execute.json/piramalfinance/State%20City%20Master"),h("GET",a).then(async o=>{const t=await o.json(),m=e?d(t.data):f(t.data.statemasterList.items);u(m)}).catch(o=>{console.warn(o)})})}
