import{dpObj as p,validateDOBForPL as P}from"./applyloanpopper.min.js";import{branchInput as y,cutomerIncome as m,cutomerName as D,cutomerNo as g,formDobInput as v,formLoanAmt as d,formTc as $,loanFormContainer as q,loanFormOtpBtn as F,loanFromBtn as u,loanOtpInput as A,loanProduct as f,stateInput as h}from"./loanformdom.min.js";export function clearPLLoanError(){const t=document.querySelector(".invalid-loanamount-msg"),o=document.querySelector(".invalid-monthlyincome-msg"),n=document.querySelector(".invalid-date-msg");t.style.display="none",o.style.display="none",n.style.display="none"}export function validatePLLoan(){if(f().dataset.loanType!=="pl"){clearPLLoanError();return}const t=[d()],o=[v()],n=[m()],a=t.every(s=>L(s,d())),l=n.every(s=>b(s,m())),e=o.every(s=>k(s));P(),l&&a&&e?u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active")}export function validationJSFunc(){const t=[g()],o=[f(),d(),D(),m(),h(),y(),$()],n=[v()],a=[h(),y()];q().addEventListener("input",({target:e})=>{if(e.tagName!="INPUT")return;if(e.dataset.valueType=="money"){let i=e.value;i=i.replace(/^0|\D/g,""),e.value=w(i),f().dataset.loanType==="pl"?(e.id==="form-income"&&b(e),e.id==="form-loan-amount"&&L(e)):clearPLLoanError()}e.dataset.valueType=="name"&&(e.value=e.value.replace(/[^a-zA-Z ]+/g,"")),e.dataset.valueType=="date"&&(e.value=e.value.replace(/\D/g,""));const s=o.every(S),r=t.every(i=>I(i,e)),c=a.every(i=>V(i,e)),E=n.every(i=>M(i,e));s&&r&&c&&E?f().dataset.loanType==="pl"?validatePLLoan():u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active")}),A().addEventListener("input",({currentTarget:e})=>{const s=e.value.trim();e.value=s.replace(/\D/g,""),document.querySelector("#otp-digits").textContent=`${e.value.length}/4 Digits`,e.value.length==4?F().classList.add("loan-form-button-active"):F().classList.remove("loan-form-button-active")}),document.querySelectorAll(".checkInputRegx input").forEach(e=>{e.addEventListener("input",({currentTarget:s})=>{const r=s.value;s.value=r.replace(/[^a-zA-Z ]+/g,"")})})}export function checkAllFieldValidation(){const o=[g(),f(),d(),D(),m(),h(),y(),$(),v()].every(S),n=I(g()),a=L(d()),l=b(m()),e=k(v()),s=V(h())&&V(y()),r=document.querySelector("#form-loan-type")?.value;if(r.trim().toLowerCase()!=="personal loan")return;const c=r.trim().toLowerCase()==="personal loan"?a&&l:!0;o&&n&&c&&s&&e?u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active")}function S(t){return t.value==null?!1:t.type=="checkbox"||t.type=="radio"?t.checked:t.value.trim()!=""}function I(t,o){const n=t.value.trim();if(n.charAt(0)==="0")return t.value="",!1;t.value=n.replace(/^0|\D/g,"");const a=/^[6-9]\d*$/.test(t.value),l=document.querySelector(".invalid-no-msg");return t==o&&(a?l.style.display="none":l.style.display="block"),a&&n.length==10}function L(t,o){const n=t.value.replace(/,/g,""),a=parseInt(n,10),l=document.querySelector("#form-loan-type")?.value,e=document.querySelector(".invalid-loanamount-msg");return l.trim().toLowerCase()!=="personal loan"?!0:a<1e5?(e.style.display="block",!1):(e.style.display="none",!0)}function b(t,o){const n=t.value.replace(/,/g,""),a=parseInt(n,10),l=document.querySelector("#form-loan-type")?.value,e=document.querySelector(".invalid-monthlyincome-msg");return l.trim().toLowerCase()!=="personal loan"?!0:a<25e3?(e.style.display="block",!1):(e.style.display="none",!0)}function V(t,o){const n=t.classList.contains("place-selected");if(t==o){const a=t.closest(".cmp-form-text-parent").querySelector(".loan-form-err");n?a.style.display="none":a.style.display="block"}return n}export function calculateAgeFromInput(t){if(!t.includes("/"))return;const[o,n,a]=t.split("/"),l=new Date(`${a}-${n}-${o}`);if(isNaN(l))return;const e=new Date;let s=e.getFullYear()-l.getFullYear();const r=e.getMonth()-l.getMonth();return(r<0||r===0&&e.getDate()<l.getDate())&&s--,s}function k(t){if((document.querySelector("#form-loan-type")?.value).trim().toLowerCase()==="personal loan")return t.dataset.validdate=="true"}function M(t,o){const n=t,a=n.value;let l=!1;if(a.length>2){const e=T(a.replaceAll("/",""));t==o&&(n.value=e),e.length==10&&N(e,t,o)&&(l=!0)}return l}function N(t,o,n){const a=t.split("/"),l=parseInt(a[0],10),e=parseInt(a[1],10)-1,s=parseInt(a[2],10),r=new Date(s,e,l),c=r.getFullYear()===s&&r.getMonth()===e&&r.getDate()===l;return c&&o==n&&(p.selectDate(`${s}-${Number(e)+1}-${l}`),p.setViewDate(`${s}-${Number(e)+1}-${l}`),p.show(),setTimeout(()=>{p.hide()},1e3)),c}function T(t){const o=t.toString();return o.length===3?`${o.slice(0,2)}/${o.slice(2)}`:o.length===4?`${o.slice(0,2)}/${o.slice(2)}`:o.length>=5?`${o.slice(0,2)}/${o.slice(2,4)}/${o.slice(4)}`:"Invalid number format"}function w(t){typeof t=="number"&&(t=t.toString());const o=t.split(".");let n=o[0];const a=o[1]?`.${o[1]}`:"";return n=n.replace(/\d(?=(\d{2})+\d$)/g,"$&,"),n+a}
