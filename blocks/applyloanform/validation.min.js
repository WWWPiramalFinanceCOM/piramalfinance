import{dpObj as u}from"./applyloanpopper.min.js";import{branchInput as p,cutomerIncome as m,cutomerName as S,cutomerNo as F,formDobInput as k,formLoanAmt as f,formTc as E,loanFormContainer as A,loanFormOtpBtn as y,loanFromBtn as v,loanOtpInput as N,loanProduct as q,stateInput as h}from"./loanformdom.min.js";export function validationJSFunc(){const e=[F()],n=[q(),f(),S(),m(),h(),p(),E()],o=[k()],a=[h(),p()],l=[f()],s=[m()];m().addEventListener("input",function(t){g(t.target)}),f().addEventListener("input",function(t){b(t.target)}),A().addEventListener("input",({target:t})=>{if(t.tagName!="INPUT")return;if(t.dataset.valueType=="money"){let r=t.value;return r=r.replace(/^0|\D/g,""),t.value=R(r),!1}t.dataset.valueType=="name"&&(t.value=t.value.replace(/[^a-zA-Z ]+/g,"")),t.dataset.valueType=="date"&&(t.value=t.value.replace(/\D/g,""));const c=n.every(M),d=e.every(r=>P(r,t)),D=a.every(r=>w(r,t)),V=o.every(r=>C(r,t)),$=l.every(r=>b(r,t)),I=s.every(r=>g(r,t)),L=o.every(r=>x(r));c&&d&&D&&V&&$&&I&&L?v().classList.add("loan-form-button-active"):v().classList.remove("loan-form-button-active")}),N().addEventListener("input",({currentTarget:t})=>{const c=t.value.trim();t.value=c.replace(/\D/g,""),document.querySelector("#otp-digits").textContent=`${t.value.length}/4 Digits`,t.value.length==4?y().classList.add("loan-form-button-active"):y().classList.remove("loan-form-button-active")}),document.querySelectorAll(".checkInputRegx input").forEach(t=>{t.addEventListener("input",({currentTarget:c})=>{const d=c.value;c.value=d.replace(/[^a-zA-Z ]+/g,"")})})}function M(e){return e.value==null?!1:e.type=="checkbox"||e.type=="radio"?e.checked:e.value.trim()!=""}function P(e,n){const o=e.value.trim();if(o.charAt(0)==="0")return e.value="",!1;e.value=o.replace(/^0|\D/g,"");const a=/^[6-9]\d*$/.test(e.value),l=document.querySelector(".invalid-no-msg");return e==n&&(a?l.style.display="none":l.style.display="block"),a&&o.length==10}function b(e,n){const o=e.value.replace(/,/g,""),a=parseInt(o,10),l=document.querySelector("#form-loan-type")?.value,s=document.querySelector(".invalid-loanamount-msg");if(!(l.trim().toLowerCase()!=="personal loan"&&e!==n))if(a<1e5)s.style.display="block";else return s.style.display="none",!0}function g(e,n){const o=e.value.replace(/,/g,""),a=parseInt(o,10),l=document.querySelector("#form-loan-type")?.value,s=document.querySelector(".invalid-monthlyincome-msg");if(!(l.trim().toLowerCase()!=="personal loan"&&e!==n))if(a<25e3)s.style.display="block";else return s.style.display="none",!0}function w(e,n){const o=e.classList.contains("place-selected");if(e==n){const a=e.closest(".cmp-form-text-parent").querySelector(".loan-form-err");o?a.style.display="none":a.style.display="block"}return o}export function calculateAgeFromInput(e){if(!e.includes("/"))return;const[n,o,a]=e.split("/"),l=new Date(`${a}-${o}-${n}`);if(isNaN(l))return;const s=new Date;let i=s.getFullYear()-l.getFullYear();const t=s.getMonth()-l.getMonth();return(t<0||t===0&&s.getDate()<l.getDate())&&i--,i}function x(e){return e.dataset.validdate=="true"}function C(e,n){const o=e,a=o.value;let l=!1;if(a.length>2){const s=B(a.replaceAll("/",""));if(e==n&&(o.value=s),s.length==10&&(T(s,e,n)&&(l=!0),e==n)){const i=document.querySelector(".invalid-date-msg");e.dataset.validdate=="true"?i.style.display="none":i.style.display="block"}}return l}function T(e,n,o){const a=e.split("/"),l=parseInt(a[0],10),s=parseInt(a[1],10)-1,i=parseInt(a[2],10),t=new Date(i,s,l),c=t.getFullYear()===i&&t.getMonth()===s&&t.getDate()===l;return c&&n==o&&(u.selectDate(`${i}-${Number(s)+1}-${l}`),u.setViewDate(`${i}-${Number(s)+1}-${l}`),u.show(),setTimeout(()=>{u.hide()},1e3)),c}function B(e){const n=e.toString();return n.length===3?`${n.slice(0,2)}/${n.slice(2)}`:n.length===4?`${n.slice(0,2)}/${n.slice(2)}`:n.length>=5?`${n.slice(0,2)}/${n.slice(2,4)}/${n.slice(4)}`:"Invalid number format"}function R(e){typeof e=="number"&&(e=e.toString());const n=e.split(".");let o=n[0];const a=n[1]?`.${n[1]}`:"";return o=o.replace(/\d(?=(\d{2})+\d$)/g,"$&,"),o+a}
