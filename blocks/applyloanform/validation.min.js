import{dpObj as p,validateDOBForPL as F}from"./applyloanpopper.min.js";import{branchInput as v,cutomerIncome as d,cutomerName as T,cutomerNo as b,formDobInput as y,formLoanAmt as f,formTc as $,loanFormContainer as A,loanFormOtpBtn as I,loanFromBtn as u,loanOtpInput as C,loanProduct as i,stateInput as g}from"./loanformdom.min.js";export function clearPLLoanError(){const t=document.querySelector(".invalid-loanamount-msg"),o=document.querySelector(".invalid-monthlyincome-msg"),a=document.querySelector(".invalid-date-msg");t.style.display="none",o.style.display="none",a.style.display="none"}export function validatePLLoan(){if(i().dataset.loanType!=="pl"||i().dataset.loanType!=="las"||i().dataset.loanType!=="lamf"){i().dataset.loanType!=="pl"?clearPLLoanError():clearLasOrLamfLoanError();return}const t=[f()],o=[y()],a=[d()],l=t.every(s=>L(s,f())),n=a.every(s=>h(s,d())),e=o.every(s=>S(s));F(),n&&l&&e?u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active")}export function validationJSFunc(){const t=[b()],o=[i(),f(),T(),d(),g(),v(),$()],a=[y()],l=[g(),v()];A().addEventListener("input",({target:e})=>{if(e.tagName!="INPUT")return;if(e.dataset.valueType=="money"){let c=e.value;c=c.replace(/^0|\D/g,""),e.value=O(c);const M=i().dataset.loanType==="pl",q=i().dataset.loanType==="las",w=i().dataset.loanType==="lamf";M||q||w?(e.id==="form-income"&&h(e),e.id==="form-loan-amount"&&L(e)):clearPLLoanError()?clearPLLoanError():clearLasOrLamfLoanError()}e.dataset.valueType=="name"&&(e.value=e.value.replace(/[^a-zA-Z ]+/g,"")),e.dataset.valueType=="date"&&(e.value=e.value.replace(/\D/g,""));const s=o.every(E),r=t.every(c=>k(c,e)),m=l.every(c=>D(c,e)),V=a.every(c=>P(c,e));s&&r&&m&&V?i().dataset.loanType==="pl"?validatePLLoan():i().dataset.loanType==="las"||i().dataset.loanType==="lamf"?validateLasOrLamfLoan():u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active"),checkAllFieldValidation()}),C().addEventListener("input",({currentTarget:e})=>{const s=e.value.trim();e.value=s.replace(/\D/g,""),document.querySelector("#otp-digits").textContent=`${e.value.length}/4 Digits`,e.value.length==4?I().classList.add("loan-form-button-active"):I().classList.remove("loan-form-button-active")}),document.querySelectorAll(".checkInputRegx input").forEach(e=>{e.addEventListener("input",({currentTarget:s})=>{const r=s.value;s.value=r.replace(/[^a-zA-Z ]+/g,"")})})}export function checkAllFieldValidation(){const o=[b(),i(),f(),T(),d(),g(),v(),$(),y()].every(E),a=k(b()),l=L(f()),n=h(d()),e=S(y()),s=D(g())&&D(v()),m=(document.querySelector("#form-loan-type")?.value).trim().toLowerCase();if(!["personal loan","loan against security","loan against mutual fund"].includes(m))return;const V=["personal loan","loan against security","loan against mutual fund"].includes(m)?l&&n:!0;o&&a&&V&&s&&e?u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active")}function E(t){return t.value==null?!1:t.type=="checkbox"||t.type=="radio"?t.checked:t.value.trim()!=""}function k(t,o){const a=t.value.trim();if(a.charAt(0)==="0")return t.value="",!1;t.value=a.replace(/^0|\D/g,"");const l=/^[6-9]\d*$/.test(t.value),n=document.querySelector(".invalid-no-msg");return t==o&&(l?n.style.display="none":n.style.display="block"),l&&a.length==10}function L(t,o){const a=t.value.replace(/,/g,""),l=parseInt(a,10),n=document.querySelector("#form-loan-type")?.value,e=document.querySelector(".invalid-loanamount-msg");return n.trim().toLowerCase()!=="personal loan"&&n.trim().toLowerCase()!=="loan against security"&&n.trim().toLowerCase()!=="loan against mutual fund"?!0:l<1e5?(e.style.display="block",!1):(e.style.display="none",!0)}function h(t,o){const a=t.value.replace(/,/g,""),l=parseInt(a,10),n=document.querySelector("#form-loan-type")?.value,e=document.querySelector(".invalid-monthlyincome-msg");return n.trim().toLowerCase()!=="personal loan"&&n.trim().toLowerCase()!=="loan against security"&&n.trim().toLowerCase()!=="loan against mutual fund"?!0:l<25e3?(e.style.display="block",!1):(e.style.display="none",!0)}function D(t,o){const a=t.classList.contains("place-selected");if(t==o){const l=t.closest(".cmp-form-text-parent").querySelector(".loan-form-err");a?l.style.display="none":l.style.display="block"}return a}export function calculateAgeFromInput(t){if(!t.includes("/"))return;const[o,a,l]=t.split("/"),n=new Date(`${l}-${a}-${o}`);if(isNaN(n))return;const e=new Date;let s=e.getFullYear()-n.getFullYear();const r=e.getMonth()-n.getMonth();return(r<0||r===0&&e.getDate()<n.getDate())&&s--,s}function S(t){const o=document.querySelector("#form-loan-type")?.value;return o.trim().toLowerCase()!=="personal loan"&&o.trim().toLowerCase()!=="loan against security"&&o.trim().toLowerCase()!=="loan against mutual fund"?!0:t.dataset.validdate=="true"}function P(t,o){const a=t,l=a.value;let n=!1;if(l.length>2){const e=x(l.replaceAll("/",""));t==o&&(a.value=e),e.length==10&&N(e,t,o)&&(n=!0)}return n}function N(t,o,a){const l=t.split("/"),n=parseInt(l[0],10),e=parseInt(l[1],10)-1,s=parseInt(l[2],10),r=new Date(s,e,n),m=r.getFullYear()===s&&r.getMonth()===e&&r.getDate()===n;return m&&o==a&&(p.selectDate(`${s}-${Number(e)+1}-${n}`),p.setViewDate(`${s}-${Number(e)+1}-${n}`),p.show(),setTimeout(()=>{p.hide()},1e3)),m}function x(t){const o=t.toString();return o.length===3?`${o.slice(0,2)}/${o.slice(2)}`:o.length===4?`${o.slice(0,2)}/${o.slice(2)}`:o.length>=5?`${o.slice(0,2)}/${o.slice(2,4)}/${o.slice(4)}`:"Invalid number format"}function O(t){typeof t=="number"&&(t=t.toString());const o=t.split(".");let a=o[0];const l=o[1]?`.${o[1]}`:"";return a=a.replace(/\d(?=(\d{2})+\d$)/g,"$&,"),a+l}export function clearLasOrLamfLoanError(){const t=document.querySelector(".invalid-loanamount-msg"),o=document.querySelector(".invalid-monthlyincome-msg"),a=document.querySelector(".invalid-date-msg");t.style.display="none",o.style.display="none",a.style.display="none"}export function validateLasOrLamfLoan(){if(i().dataset.loanType!=="las"||i().dataset.loanType!=="lamf"){clearLasOrLamfLoanError();return}const t=[f()],o=[y()],a=[d()],l=t.every(s=>L(s,f())),n=a.every(s=>h(s,d())),e=o.every(s=>S(s));F(),n&&l&&e?u().classList.add("loan-form-button-active"):u().classList.remove("loan-form-button-active")}
