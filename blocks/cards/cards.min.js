import{ctaClickInteraction as d}from"../../dl.min.js";import{createOptimizedPicture as p}from"../../scripts/aem.min.js";import{decoratePlaceholder as m}from"../../scripts/scripts.min.js";import{moveInstrumentation as l}from"../../scripts/common.min.js";export default async function h(r){r.innerHTML=await m(r);const[i,o,...s]=[...r.children],n=document.createElement("div");if(i.textContent){n.className="cards-heading";const e=document.createElement("h2");e.textContent=i.textContent,n.append(e),o&&n.append(o)}const a=document.createElement("ul");s.forEach(e=>{const t=document.createElement("li");for(l(e,t);e.firstElementChild;)t.append(e.firstElementChild);[...t.children].forEach(c=>{c.children.length===1&&c.querySelector("picture")?c.className="cards-card-image":c.className="cards-card-body"}),a.append(t)}),a.querySelectorAll("picture > img").forEach(e=>{const t=p(e.src,e.alt,!1,[{width:"750"}]);l(e,t.querySelector("img")),e.closest("picture").replaceWith(t)}),r.textContent="",r.append(n),r.append(a);try{r.closest(".section.ratings-card-wrapper")&&r.closest(".section.ratings-card-wrapper").querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{const c={};c.click_text=t.target.textContent.trim(),c.cta_position=t.target.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim(),d(c)})})}catch(e){console.warn(e)}}
