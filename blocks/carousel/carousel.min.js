import{targetObject as $}from"../../scripts/scripts.min.js";import{body as M,createCarousle as I}from"../../scripts/common.min.js";import{generateDetailedTeaserDOM as C}from"../detailed-teaser/detailed-teaser.min.js";import{generateTeaserDOM as N}from"../teaser/teaser.min.js";const m={};m["detailed-teaser"]=C,m["ss-teaser"]=C;function P(t){t.forEach(a=>{if(a.isIntersecting){const o=a.target.parentNode.parentNode.lastChild;[...o.querySelectorAll(":scope button")].forEach(d=>d.classList.remove("selected")),o.querySelector(`:scope button[data-panel='${a.target.dataset.panel}']`).classList.add("selected")}})}const B=new IntersectionObserver(P,{threshold:.6,rootMargin:"500px 0px"});export default function H(t){try{if(window.location.pathname==="/personal-loan"&&window.location.search&&t.closest(".camp-btn")){const e=t.querySelector("a"),l=document.querySelectorAll(".camp-btn")[1].querySelector("a"),s=new URL(e.href);e.href=s.origin+s.pathname+window.location.search,l.href=s.origin+s.pathname+window.location.search}}catch(e){console.warn(e)}const a=document.createElement("div");a.classList.add("panel-container","carousel-inner"),a.id="carouselInner";const o=document.createElement("div");o.classList.add("button-container");const d=document.createElement("div");d.classList.add("carousel-navigation-buttons"),d.innerHTML=`
    <button type="button" class="slide-prev glider-prev" aria-label="Previous Slide">${t.children[0].outerHTML||"<"}</button>
    <button type="button" class="slide-next glider-next" aria-label="Next Slide">${t.children[1].outerHTML||">"}</button>
  `;const T=t.children[2].innerText.trim()||"primary",q=t.children[3].innerText.trim()||"rotate-off",p=t.children[4].innerText.trim()||"One",O=t.children[5].innerText.trim()||"",L=$.isMobile||p==="One",x=q==="rotate-on";t.classList.add(T,p);const h=Array.from(t.children).slice(6);[...h].forEach((e,l)=>{const[s,i,c,...r]=e.children,y=r[r.length-2].textContent.trim(),b=r[r.length-1].textContent.trim(),E=c.textContent.trim(),u=(E?E.split(","):[]).map(n=>n&&n.trim()).filter(n=>!!n);let S="teaser",f=null;if(u.forEach(n=>{m[n]&&(S=n,f=m[n])}),f=f?f([s,i,...r],u):N([s,i,...r],u),e.textContent="",e.classList.add(S,"block","carousel-item"),u.forEach(n=>e.classList.add(n.trim())),e.dataset.panel=`panel_${l}`,e.append(f),y&&(e.style.backgroundColor=y),b&&(e.style.backgroundImage=b),a.append(e),h.length>1){const n=document.createElement("button");o.append(n),n.title=`Slide ${l+1}`,n.dataset.panel=`panel_${l}`,h[l].classList.forEach(w=>{["teaser","block","carousel-item"].includes(w)||n.classList.add(w)}),l||n.classList.add("selected"),p==="Glider"||L&&B.observe(e),n.addEventListener("click",()=>{a.scrollTo({top:0,left:e.offsetLeft-e.parentNode.offsetLeft,behavior:"smooth"})})}}),t.textContent="",t.append(a),t.append(d);const v=t.querySelector(".slide-prev"),g=t.querySelector(".slide-next");if(p==="Glider"){const e=JSON.parse(O);e.arrows={},e.arrows.prev=v,e.arrows.next=g,e.dots=o,t.append(o),new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting&&new Glider(a,e)})}).observe(t)}else if(L){let e=function(i){a.scrollTo({top:0,left:i.offsetLeft-i.parentNode.offsetLeft,behavior:"smooth"})},l=function(){const i=o.querySelector(".selected"),r=t.querySelector(`[data-panel=${i.dataset.panel}]`).previousElementSibling;r&&e(r)},s=function(){const i=o.querySelector(".selected"),c=t.querySelector(`[data-panel=${i.dataset.panel}]`);if(x){const r=c.nextElementSibling?c.nextElementSibling:t.querySelector("[data-panel");r&&e(r)}else{const r=c.nextElementSibling;r&&e(r)}};v?.addEventListener("click",()=>{l()}),g.addEventListener("click",()=>{s()}),o.children.length&&(t.append(o),x&&setInterval(()=>{M.style.overflowY!="hidden"&&s()},7e3))}else o.children.length&&(t.append(o),I(t,v,g))}
