import{loadFragment as l}from"../fragment/fragment.min.js";import{buildBlock as d,decorateBlock as i,decorateIcons as r,loadBlock as p,loadCSS as u}from"../../scripts/aem.min.js";export async function createModal(a){await u(`${window.hlx.codeBasePath}/blocks/modal/modal.css`);const o=document.createElement("dialog"),n=document.createElement("div");n.classList.add("modal-content"),n.append(...a),o.append(n);const t=document.createElement("button");t.classList.add("close-button"),t.setAttribute("aria-label","Close"),t.type="button",t.innerHTML='<span class="icon icon-close"></span>',t.addEventListener("click",()=>o.close()),o.append(t),o.addEventListener("click",e=>{const s=o.getBoundingClientRect();(e.clientX<s.left||e.clientX>s.right||e.clientY<s.top||e.clientY>s.bottom)&&o.close()});try{o.querySelector(".support-contact-us-popup")&&o.querySelector(".support-contact-us-popup .button-container").addEventListener("click",()=>o.close())}catch(e){console.warn(e)}const c=d("modal","");return document.querySelector("main").append(c),i(c),await p(c),r(t),o.addEventListener("close",()=>{document.body.classList.remove("modal-open"),c.remove()}),c.append(o),{block:c,showModal:()=>{o.showModal(),setTimeout(()=>{n.scrollTop=0},0),document.body.classList.add("modal-open")}}}export async function openModal(a){const o=a.startsWith("http")?new URL(a,window.location).pathname:a,n=await l(o),{showModal:t}=await createModal(n.childNodes);t()}
