import{applyLoanNow as j,bannerClick as B,ctaClick as F,ctaClickInteraction as l,readMoreInteraction as G}from"../../dl.min.js;import{getMetadata as W}from"../../scripts/aem.min.js;import{targetObject as n}from"../../scripts/scripts.min.js;import{handleOpenFormOnClick as z}from"../applyloanform/applyloanforms.min.js;export function decorateButtons(...r){return r.map(e=>{const c=e.querySelector("a");return c?(c.classList.add("button"),c.parentElement.tagName==="EM"&&c.classList.add("secondary"),c.parentElement.tagName==="STRONG"&&c.classList.add("primary"),c.outerHTML):""}).join("")}function y(r){const e=document.createElement("a"),c=r.innerText.trim();return e.setAttribute("aria-label","teaser link"),e.setAttribute("tabindex","0"),c?e.href=c:e.setAttribute("role","button"),e}export function generateTeaserDOM(r,e){document.createElement("a").classList.add("null-dom");const[d,$,m,x,v,u,S,I,H,V,C,A,_,X,q,E,D,Y,T,N,b]=r,i=d.querySelector("picture"),w=$.querySelector("picture"),O=u.textContent.trim()!=="",p=C.querySelector("a")||y(C),g=q.querySelector("a")||y(q),h=T.querySelector("a")||y(T);p.innerHTML=H.innerHTML,g.innerHTML=_.innerHTML,h.innerHTML=D.innerHTML;let f;[...e].includes("original-img")?f=i?.querySelector("img")?.src&&i?.querySelector("img").src?` style='background-image:url(${i?.querySelector("img").src.split("?")[0]})' `:"":f=i?.querySelector("img")?.src&&i?.querySelector("img").src?` style='background-image:url(${i?.querySelector("img").src})' `:"";const P=b?.querySelector("img")?.src?` style='background-image:url(${b?.querySelector("img")?.src})' `:"";let k=f;n.isTab&&(k=P);const s=document.createRange().createContextualFragment(`
    <div class='background' ${k}'>
      <div class="front-picture">${w?w.outerHTML:""}</div>
      <div class='foreground'>
        <div class='text'>
          ${m.textContent.trim()!==""?`<div class='eyebrow'>${m.textContent.trim()}</div>`:""}
          <div class='title'>${x.innerHTML}</div>
          <div class='long-description'>${v.innerHTML}</div>
          <!-- <div class='short-description'>${O?u.innerHTML:v.innerHTML}</div>-->
          <div class='short-description'>${u.innerHTML}</div>
          <div class='cta-image-wrapper'>
            <div class="img-with-text-wrap">
              <div class="cta-image">${p?p.outerHTML:""}</div>
              <p class="cta-text">${A.innerText}</p>
            </div>
            <div class="img-with-text-wrap">
              <div class="cta-image">${g?g.outerHTML:""}</div>
              <p class="cta-text">${E.innerText}</p>
            </div>
            <div class="img-with-text-wrap">
              <div class="cta-image">${h?h.outerHTML:""}</div>
              <p class="cta-text">${N.innerText}</p>
            </div>
          </div>
          <div class='cta'>${decorateButtons(S,I)}</div>
        </div>
        <div class='spacer'></div>
      </div>
  `),L=[...e].find(o=>o.startsWith("bg-"));L&&s.querySelector(".foreground").style.setProperty("--teaser-background-color",`var(--${L.substr(3)})`),s?.querySelectorAll("a").forEach((o,M)=>{o.addEventListener("click",function(t){try{if(t.target.closest(".calc-desktop-carousel-wrapper"))if(this.closest(".carousel-articles-wrapper"))K(t);else if(this.closest(".csr-committee-wrapper"))Q(t);else if(t.target.closest(".media-cards-wrapper")){const a={};a.click_text=t.target.closest(".long-description").querySelector("p").textContent.trim(),a.cta_position=t.target.closest(".section").querySelector(".tab-name-wrapper .carousel-inner .active").textContent.trim(),l(a)}else if(t.target.closest(".calc-desktop-carousel-wrapper")){const a={};a.click_text=t.target.closest(".text").querySelector(".long-description p").textContent.trim(),a.cta_position=t.target.closest(".section").querySelector(".default-content-wrapper").textContent.trim(),l(a)}else j(`${m.textContent.trim()} ${x.textContent.trim()}`,n.pageName,"banner",n.pageName);else{if(t.target.closest(".multi-calc-teaser-wrapper")||(M||t.target.closest(".cta"))&&B(t.target.innerText,n.pageName),t.target.closest(".multi-calc-teaser-wrapper")){const a=t.target.textContent.trim(),R="",U=t.target.closest(".foreground").querySelector(".long-description").querySelector("p").textContent.trim();F(a,U,R,n.pageName)}if(t.target.closest(".open-form-on-click")){const a=t.target.closest(".open-form-on-click");z(a)}}}catch(a){console.warn(a)}})});try{[...e]?.includes("click-able")&&s.children[0].addEventListener("click",function(M){try{if(this.closest(".section.board-of-directors-wrapper")){const t={};t.click_text=this.querySelector(".title").textContent.trim(),t.cta_position=this.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim(),l(t)}}catch(t){console.warn(t)}location.href=W("lang-path")+S.innerText})}catch{}return s}export default function J(r){const e=[...r.children].map(d=>d.firstElementChild),c=generateTeaserDOM(e,r.classList);r.textContent="",r.append(c)}function K(r){const e={};e.article_name=r?.target.getAttribute("href").split("/").pop(),e.cta_position=r?.target.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim(),e.click_header=r?.target.textContent.trim(),G(e)}function Q(r){const e={};e.click_text=r.target.textContent.trim(),e.cta_position=r.target.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim(),l(e)}
