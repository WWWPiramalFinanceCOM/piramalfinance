import{ctaClick as A,ctaClickInteraction as _}from"../../dl.min.js";import{autoLinkLangPath as $}from"../../scripts/aem.min.js";import{targetObject as H}from"../../scripts/scripts.min.js";import"../../scripts/common.min.js";import{loanProductsAnalytics as j}from"./teaserv2-analytics.min.js";export default async function F(t){const g=Array.from(t.children,e=>e.firstElementChild),l=renderTeaserHTMLFactory(g,t);t.innerHTML="",t.append(l),j(t),t.closest(".section.neeyat-banner")&&(t.querySelector("a").target="_blank");try{t.closest(".support-contact-us-wrapper")&&t.querySelector("a").getAttribute("href")&&t.querySelector("a").addEventListener("click",e=>{const o={};o.click_text=e.target.textContent.trim(),o.cta_position="Redirection",_(o)})}catch(e){console.warn(e)}if(t.closest(".calculator-section-wrapper")){const e=t.querySelector("a"),o=e.querySelector(".button-container-text");let m;o.addEventListener("click",r=>{m=r.currentTarget.textContent.trim().toLowerCase();const i=r.target.closest(".calculator-section-wrapper").querySelector(".default-content-wrapper h2")?.innerText,c=r.target.closest(".calculator-section-wrapper .block").querySelector(".title")?.innerText,p=r.target.closest(".calculator-section-wrapper ").querySelector("a .button-container-text")?.textContent.trim();A(p,c,i,H.pageName)}),e.addEventListener("click",r=>{if(m!="try now"){const i=r.target.closest(".calculator-section-wrapper").querySelector(".default-content-wrapper h2")?.innerText,c=r.target.closest(".calculator-section-wrapper .block").querySelector(".title")?.innerText,p=r.target.closest(".calculator-section-wrapper ").querySelector("a .button-container-text")?.textContent.trim();A(p,c,i,H.pageName)}})}}export function renderTeaserHTMLFactory(t,g){const l=window.matchMedia("(min-width: 768px)"),e=window.matchMedia("(max-width: 767px)"),[o,m,r,i,c,p,f,I,M,h,k,E]=t,a=(P,L,q)=>{const w=document.createElement(P);return L&&(w.className=L),q&&(w.innerHTML=q||""),w},T=o?.textContent.trim()||"",n=document.createElement("a");n.setAttribute("aria-label","teaser link"),n.setAttribute("tabindex","0"),T?n.href=T:n.setAttribute("role","button");let u=m?.querySelector("picture > img")?.src||"",d=E?.querySelector("picture > img")?.src||"";const C=M?.textContent.trim()?.src||"",s=a("div","bg-image");g?.closest(".section").classList.contains("corporate-financing-banner-wrapper")&&(l.matches?u=u.split("?")[0]:e.matches&&(d=d.split("?")[0])),l.matches?u&&(s.style.backgroundImage=`url(${u})`):e.matches&&d&&(s.style.backgroundImage=`url(${d})`),C&&(s.style.backgroundColor=C);const v=r?.querySelector("picture"),S=a("div","front-image");v&&S.append(v);const D=a("div","title",i?.textContent.trim()||""),N=a("div","description",c?.textContent.trim()||"");let x="";const b=I?.querySelector("a")||"";b?(b.innerText=f?.textContent.trim()||"",x=b.outerHTML):f&&(x=a("div","button-container-text",f?.textContent.trim()||""));const y=document.createElement("div");y.innerHTML=k?.innerHTML||"",y.classList.add("rte-text-description"),s.append(S,D,N,x,y);const B=h?.textContent?.trim()||"";return h.closest(".teaserv2-wrapper")?.setAttribute("data-teaserv2-xf",B),n.tagName==="A"&&(n.append(s),$(n)),n}
