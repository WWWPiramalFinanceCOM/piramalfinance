import{ctaClick as q,ctaClickInteraction as P}from"../../dl.min.js";import{autoLinkLangPath as _}from"../../scripts/aem.min.js";import{targetObject as A}from"../../scripts/scripts.min.js";import{loanProductsAnalytics as $}from"./teaserv2-analytics.min.js";export default async function j(t){const g=Array.from(t.children,e=>e.firstElementChild),u=renderTeaserHTMLFactory(g,t);t.innerHTML="",t.append(u),$(t),t.closest(".section.neeyat-banner")&&(t.querySelector("a").target="_blank");try{t.closest(".support-contact-us-wrapper")&&t.querySelector("a").getAttribute("href")&&t.querySelector("a").addEventListener("click",e=>{const o={};o.click_text=e.target.textContent.trim(),o.cta_position="Redirection",P(o)})}catch(e){console.warn(e)}if(t.closest(".calculator-section-wrapper")){const e=t.querySelector("a"),o=e.querySelector(".button-container-text");let m;o.addEventListener("click",r=>{m=r.currentTarget.textContent.trim().toLowerCase();const c=r.target.closest(".calculator-section-wrapper").querySelector(".default-content-wrapper h2")?.innerText,a=r.target.closest(".calculator-section-wrapper .block").querySelector(".title")?.innerText,i=r.target.closest(".calculator-section-wrapper ").querySelector("a .button-container-text")?.textContent.trim();q(i,a,c,A.pageName)}),e.addEventListener("click",r=>{if(m!="try now"){const c=r.target.closest(".calculator-section-wrapper").querySelector(".default-content-wrapper h2")?.innerText,a=r.target.closest(".calculator-section-wrapper .block").querySelector(".title")?.innerText,i=r.target.closest(".calculator-section-wrapper ").querySelector("a .button-container-text")?.textContent.trim();q(i,a,c,A.pageName)}})}}export function renderTeaserHTMLFactory(t,g){const u=window.matchMedia("(min-width: 768px)"),e=window.matchMedia("(max-width: 767px)"),[o,m,r,c,a,i,I,H,w,M,k]=t,s=(B,S,L)=>{const b=document.createElement(B);return S&&(b.className=S),L&&(b.innerHTML=L||""),b},h=o?.textContent.trim()||"",n=document.createElement("a");n.setAttribute("aria-label","teaser link"),n.setAttribute("tabindex","0"),h?n.href=h:n.setAttribute("role","button");let p=m?.querySelector("picture > img")?.src||"",d=k?.querySelector("picture > img")?.src||"";const T=H?.textContent.trim()?.src||"",l=s("div","bg-image");g?.closest(".section").classList.contains("corporate-financing-banner-wrapper")&&(u.matches?p=p.split("?")[0]:e.matches&&(d=d.split("?")[0])),u.matches?p&&(l.style.backgroundImage=`url(${p})`):e.matches&&d&&(l.style.backgroundImage=`url(${d})`),T&&(l.style.backgroundColor=T);const C=r?.querySelector("picture"),v=s("div","front-image");C&&v.append(C);const E=s("div","title",c?.textContent.trim()||""),D=s("div","description",a?.textContent.trim()||"");let f="";const x=I?.querySelector("a")||"";x?(x.innerText=i?.textContent.trim()||"",f=x.outerHTML):i&&(f=s("div","button-container-text",i?.textContent.trim()||""));const y=document.createElement("div");y.innerHTML=M?.innerHTML||"",y.classList.add("rte-text-description"),l.append(v,E,D,f,y);const N=w?.textContent?.trim()||"";return w.closest(".teaserv2-wrapper")?.setAttribute("data-teaserv2-xf",N),n.tagName==="A"&&(n.append(l),_(n)),n}
