import{fetchAPI as q,getProps as y,renderHelper as m}from"../../scripts/common.min.js";import{customerTemplateCopy as h,customerCardCopy as x}from"./template.min.js";export default async function w(s){const i=y(s),[u,r,p,a,l,f,b]=i;s.classList.add(b),s.innerHTML="";let c=h;const g=x;try{const o=await(await q("GET",u)).json(),t=m(o.data,g);c=c.replace("{ribbononeimg}",p).replace("{ribbontwoimg}",a).replace("{ribbonthreeimg}",l).replace("{ribbonfourimg}",f),s.innerHTML=m([{cards:t}],c)}catch(e){console.warn(e)}function d(){const e=document.querySelectorAll(".customer-info"),o=[];e.forEach(t=>{const n={imageSrc:t.querySelector(".personimg").src,description:t.querySelector(".comments .custinfo").textContent,name:t.querySelector(".comments .custname").textContent,custprofession:t.querySelector(".comments .custprofession").textContent};o.push(n)}),S(o)}r&&(typeof r=="number"&&(r=parseInt(r)),setInterval(()=>{d()},r));function S(e){const o=e.pop();for(let t=e.length-1;t>=0;t--)e[t+1]=e[t];e[0]=o,C(e)}function C(e){document.querySelectorAll(".customer-info").forEach((t,n)=>{t.querySelector(".personimg").src=e[n].imageSrc,t.querySelector(".comments .custinfo").textContent=e[n].description,t.querySelector(".comments .custname").textContent=e[n].name,t.querySelector(".comments .custprofession").textContent=e[n].custprofession})}}
