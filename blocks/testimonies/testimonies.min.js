export const setupPositions=e=>{const t=[...e.querySelectorAll(".testimony")],{selectedIndex:s}=e.dataset;let n=0;t.forEach((a,d)=>{a.className=a.className.replace(/pos-\d+/,""),d!==parseInt(s,10)&&(a.classList.add(`pos-${n}`),n+=1)})},showTestimony=(e,t)=>{const s=[...e.querySelectorAll(".testimony")],n=typeof t=="string"?parseInt(t,10):t;s.forEach((a,d)=>{d===n?(a.classList.remove("unselected"),a.classList.add("selected")):(a.classList.remove("selected"),a.classList.add("unselected"))}),e.dataset.selectedIndex=typeof t=="string"?t:t.toString(),setupPositions(e)};const p=(e,t)=>{let s=parseInt(t.dataset.selectedIndex,10);e[s].classList.remove("selected"),e[s].classList.add("unselected"),s=(s+1)%e.length,t.dataset.selectedIndex=s.toString(),e[s].classList.remove("unselected"),e[s].classList.add("selected")};export const startScroll=e=>{const t=[...e.querySelectorAll(".testimony")];e.dataset.testimoniesInterval=setInterval(()=>{p(t,e),showTestimony(e,parseInt(e.dataset.selectedIndex,10))},12e3)};export default function y(e){const t=[...e.children];e.dataset.selectedIndex="0",t.forEach((s,n)=>{const[a,d]=s.querySelectorAll(":scope > div");s.classList.add("testimony",n===0?"selected":"unselected"),a.classList.add("testimony-img"),d.classList.add("testimony-content"),s.dataset.index=n;const[l,i,r]=d.querySelectorAll(":scope p");l?.classList?.add("testimony-desc"),i?.classList?.add("testimony-name"),r?.classList?.add("testimony-title");const m=[document.createElement("img"),document.createElement("img"),document.createElement("img"),document.createElement("img")].map((c,o)=>(c.classList.add(`confetti-${o+1}`,"confetti"),c.src=`${window.hlx.codeBasePath}/icons/confetti-${o+1}.svg`,c.alt="confetti icon",c)),u=[document.createElement("div"),document.createElement("div"),document.createElement("div"),document.createElement("div")].map((c,o)=>(c.classList.add(`animation-circle-${o}`,"animation-circle"),c));a.append(...u,...m)}),setupPositions(e),startScroll(e)}
