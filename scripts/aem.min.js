const $="js",b="css";function i(t,e={}){const n="aem-rum";i.baseURL=i.baseURL||new URL(window.RUM_BASE==null?"https://rum.hlx.page":window.RUM_BASE,window.location),i.defer=i.defer||[];const o=s=>{i[s]=i[s]||((...r)=>i.defer.push({fnname:s,args:r}))};i.drain=i.drain||((s,r)=>{i[s]=r,i.defer.filter(({fnname:a})=>s===a).forEach(({fnname:a,args:l})=>i[a](...l))}),i.always=i.always||[],i.always.on=(s,r)=>{i.always[s]=r},i.on=(s,r)=>{i.cases[s]=r},o("observe"),o("cwv");try{if(window.hlx=window.hlx||{},!window.hlx.rum){const c=new URLSearchParams(window.location.search).get("rum")==="on"?1:100,d=Array.from({length:75},(A,v)=>String.fromCharCode(48+v)).filter(A=>/\d|[A-Z]/i.test(A)).filter(()=>Math.random()*75>70).join(""),u=Math.random(),g=u*c<1,y=window.performance?window.performance.timeOrigin:Date.now(),U={full:()=>window.location.href,origin:()=>window.location.origin,path:()=>window.location.href.replace(/\?.*$/,"")},h=sessionStorage.getItem(n)?JSON.parse(sessionStorage.getItem(n)):{};h.pages=(h.pages?h.pages:0)+1+(Math.floor(Math.random()*20)-10),sessionStorage.setItem(n,JSON.stringify(h)),window.hlx.rum={weight:c,id:d,random:u,isSelected:g,firstReadTime:y,sampleRUM:i,sanitizeURL:U[window.hlx.RUM_MASK_URL||"path"],rumSessionStorage:h}}const{weight:s,id:r,firstReadTime:a}=window.hlx.rum;if(window.hlx&&window.hlx.rum&&window.hlx.rum.isSelected){const l=["weight","id","referer","checkpoint","t","source","target","cwv","CLS","FID","LCP","INP","TTFB"],c=(d=e)=>{const u=Math.round(window.performance?window.performance.now():Date.now()-a),g=JSON.stringify({weight:s,id:r,referer:window.hlx.rum.sanitizeURL(),checkpoint:t,t:u,...e},l),y=new URL(`.rum/${s}`,i.baseURL).href;navigator.sendBeacon(y,g),console.debug(`ping:${t}`,d)};i.cases=i.cases||{load:()=>i("pagesviewed",{source:window.hlx.rum.rumSessionStorage.pages})||!0,cwv:()=>i.cwv(e)||!0,lazy:()=>{const d=document.createElement("script");return d.src=new URL(".rum/@adobe/helix-rum-enhancer@^1/src/index.min.js",i.baseURL).href,document.head.appendChild(d),!0}},c(e),i.cases[t]&&i.cases[t]()}i.always[t]&&i.always[t](e)}catch{}}function x(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const t=document.querySelector('script[src$="/scripts/scripts.min.js"]');if(t)try{const e=new URL(t.src,window.location);e.host===window.location.host?[window.hlx.codeBasePath]=e.pathname.split("/scripts/scripts.min.js"):[window.hlx.codeBasePath]=e.href.split("/scripts/scripts.min.js")}catch(e){console.warn(e)}}function B(){x(),i("top"),window.addEventListener("load",()=>i("load")),window.addEventListener("unhandledrejection",t=>{i("error",{source:t.reason.sourceURL,target:t.reason.line})}),window.addEventListener("error",t=>{i("error",{source:t.filename,target:t.lineno})})}function f(t){return typeof t=="string"?t.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}function S(t){return f(t).replace(/-([a-z])/g,e=>e[1].toUpperCase())}function C(t){const e={};return t.querySelectorAll(":scope > div").forEach(n=>{if(n.children){const o=[...n.children];if(o[1]){const s=o[1],r=f(o[0].textContent);let a="";if(s.querySelector("a")){const l=[...s.querySelectorAll("a")];l.length===1?a=l[0].href:a=l.map(c=>c.href)}else if(s.querySelector("img")){const l=[...s.querySelectorAll("img")];l.length===1?a=l[0].src:a=l.map(c=>c.src)}else if(s.querySelector("p")){const l=[...s.querySelectorAll("p")];l.length===1?a=l[0].textContent:a=l.map(c=>c.textContent)}else a=n.children[1].textContent;e[r]=a}}}),e}function P(t,e){if(document.querySelector(`head > link[href="${t}"]`))typeof e=="function"&&e("noop");else{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),typeof e=="function"&&(n.onload=o=>e(o.type),n.onerror=o=>e(o.type)),document.head.appendChild(n)}}async function q(t,e){return new Promise((n,o)=>{if(document.querySelector(`head > script[src="${t}"]`))n();else{const s=document.createElement("script");if(s.src=t,e)for(const r in e)s.setAttribute(r,e[r]);s.onload=n,s.onerror=o,document.head.append(s)}})}function m(t,e=document){const n=t&&t.includes(":")?"property":"name";return[...e.head.querySelectorAll(`meta[${n}="${t}"]`)].map(s=>s.content).join(", ")||""}function M(t,e="",n=!1,o=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]){const s=new URL(t,window.location.href),r=document.createElement("picture"),{pathname:a}=s,l=a.substring(a.lastIndexOf(".")+1);return o.forEach(c=>{const d=document.createElement("source");c.media&&d.setAttribute("media",c.media),d.setAttribute("type","image/webp"),d.setAttribute("srcset",`${a}?width=${c.width}&format=webply&optimize=medium`),r.appendChild(d)}),o.forEach((c,d)=>{if(d<o.length-1){const u=document.createElement("source");c.media&&u.setAttribute("media",c.media),u.setAttribute("srcset",`${a}?width=${c.width}&format=${l}&optimize=medium`),r.appendChild(u)}else{const u=document.createElement("img");u.setAttribute("loading",n?"eager":"lazy"),u.setAttribute("alt",e),r.appendChild(u),u.setAttribute("src",`${a}?width=${c.width}&format=${l}&optimize=medium`)}}),r}function z(){const t=(o,s)=>{s.split(",").forEach(r=>{o.classList.add(f(r.trim()))})},e=m("template");e&&t(document.body,e);const n=m("theme");n&&t(document.body,n)}function R(t){const e=["P","PRE","UL","OL","PICTURE","TABLE","H1","H2","H3","H4","H5","H6"],n=o=>{const s=document.createElement("p");s.append(...o.childNodes),[...o.attributes].filter(({nodeName:r})=>r==="class"||r.startsWith("data-aue")||r.startsWith("data-richtext")).forEach(({nodeName:r,nodeValue:a})=>{s.setAttribute(r,a),o.removeAttribute(r)}),o.append(s)};t.querySelectorAll(":scope > div > div").forEach(o=>{o.hasChildNodes()&&(!!o.firstElementChild&&e.some(r=>o.firstElementChild.tagName===r)?o.firstElementChild.tagName==="PICTURE"&&(o.children.length>1||o.textContent.trim())&&n(o):n(o))})}function N(t){t.querySelectorAll("a").forEach(e=>{if(e.title=e.title||e.textContent,e.hasAttribute("href")&&e.href.includes("rel")&&(e.setAttribute("rel",getRelParam(e.href)),console.log("a :: ",e),e.setAttribute("href",removeRelParam(e.getAttribute("href"))),e.textContent=e.textContent.replace(/([?&])?rel=[^&\s]*/gi,"").replace(/[?&]$/,""),e.setAttribute("title",removeRelParam(e.getAttribute("title")))),e.href!==e.textContent){const n=e.parentElement,o=e.parentElement.parentElement;e.querySelector("img")||(n.childNodes.length===1&&(n.tagName==="P"||n.tagName==="DIV")&&(e.className="button",n.classList.add("button-container")),n.childNodes.length===1&&n.tagName==="STRONG"&&o.childNodes.length===1&&o.tagName==="P"&&(e.className="button primary",o.classList.add("button-container")),n.childNodes.length===1&&n.tagName==="EM"&&o.childNodes.length===1&&o.tagName==="P"&&(e.className="button secondary",o.classList.add("button-container")))}})}export function removeRelParam(t){try{const e=new URL(t);return e.searchParams.delete("rel"),e.toString()}catch{return t}}export function getRelParam(t){try{return new URL(t).searchParams.get("rel")}catch{return t}}function I(t,e="",n=""){const o=Array.from(t.classList).find(r=>r.startsWith("icon-")).substring(5),s=document.createElement("img");s.dataset.iconName=o,s.src=`${window.hlx.codeBasePath}${e}/icons/${o}.svg`,s.alt=n,s.loading="lazy",t.append(s)}function T(t,e=""){[...t.querySelectorAll("span.icon")].forEach(o=>{I(o,e)})}function j(t){t.querySelectorAll(":scope > div:not([data-section-status])").forEach(e=>{const n=[];let o=!1;[...e.children].forEach(r=>{if(r.tagName==="DIV"||!o){const a=document.createElement("div");n.push(a),o=r.tagName!=="DIV",o&&a.classList.add("default-content-wrapper")}n[n.length-1].append(r)}),n.forEach(r=>e.append(r)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none";const s=e.querySelector("div.section-metadata");if(s){const r=C(s);Object.keys(r).forEach(a=>{a==="style"?r.style.split(",").filter(c=>c).map(c=>f(c.trim())).forEach(c=>e.classList.add(c)):e.dataset[S(a)]=r[a]}),s.parentNode.remove()}})}async function k(t="default"){return window.placeholders=window.placeholders||{},window.placeholders[t]||(window.placeholders[t]=new Promise(e=>{fetch(`${t==="default"?"":t}/api/placeholder.json`).then(n=>n.ok?n.json():{}).then(n=>{const o={};n.data.filter(s=>s.Key).forEach(s=>{o[S(s.Key)]=s.Text}),window.placeholders[t]=o,e(window.placeholders[t])}).catch(()=>{window.placeholders[t]={},e(window.placeholders[t])})})),window.placeholders[`${t}`]}function E(t){const e=[...t.querySelectorAll(":scope > div.section")];for(let n=0;n<e.length;n+=1){const o=e[n];if(o.dataset.sectionStatus!=="loaded")if(o.querySelector('.block[data-block-status="initialized"], .block[data-block-status="loading"]')){o.dataset.sectionStatus="loading";break}else o.dataset.sectionStatus="loaded",o.style.display=null}}function L(t,e){const n=Array.isArray(e)?e:[[e]],o=document.createElement("div");return o.classList.add(t),n.forEach(s=>{const r=document.createElement("div");s.forEach(a=>{const l=document.createElement("div");(a.elems?a.elems:[a]).forEach(d=>{d&&(typeof d=="string"?l.innerHTML+=d:l.appendChild(d))}),r.appendChild(l)}),o.appendChild(r)}),o}export function getExtension(t){if(t==="js")return m("minify")==="true"?`.min.${$}`:`.${$}`;if(t==="css")return m("minify")==="true"?`.min.${b}`:`.${b}`}async function p(t){const e=t.dataset.blockStatus;if(e!=="loading"&&e!=="loaded"){t.dataset.blockStatus="loading";const{blockName:n}=t.dataset;try{const o=P(`${window.hlx.codeBasePath}/blocks/${n}/${n}${getExtension("css")}`),s=new Promise(r=>{(async()=>{try{const a=await import(`${window.hlx.codeBasePath}/blocks/${n}/${n}${getExtension("js")}`);a.default&&await a.default(t)}catch(a){console.warn(`failed to load module for ${n}`,a)}r()})()});await Promise.all([o,s])}catch(o){console.warn(`failed to load block ${n}`,o)}t.dataset.blockStatus="loaded"}return t}async function O(t){E(t);const e=[...t.querySelectorAll("div.block")];for(let n=0;n<e.length;n+=1)await p(e[n]),E(t)}function w(t){const e=t.classList[0];if(e&&!t.dataset.blockStatus){t.classList.add("block"),t.dataset.blockName=e,t.dataset.blockStatus="initialized",R(t),t.parentElement.classList.add(`${e}-wrapper`);const o=t.closest(".section");o&&o.classList.add(`${e}-container`),N(t)}}function _(t){t.querySelectorAll("div.section > div > div").forEach(w)}async function H(t){const e=L("header","");return t.append(e),w(e),p(e)}async function W(t){const e=L("footer","");return t.append(e),w(e),p(e)}async function D(t){const e=document.querySelector(".block");e&&t.includes(e.dataset.blockName)&&await p(e),document.body.style.display=null;const o=document.querySelector("main img");await new Promise(s=>{o&&!o.complete?(o.setAttribute("loading","eager"),o.addEventListener("load",s),o.addEventListener("error",s)):s()})}B();export{L as buildBlock,M as createOptimizedPicture,w as decorateBlock,_ as decorateBlocks,N as decorateButtons,T as decorateIcons,j as decorateSections,z as decorateTemplateAndTheme,k as fetchPlaceholders,m as getMetadata,p as loadBlock,O as loadBlocks,P as loadCSS,W as loadFooter,H as loadHeader,q as loadScript,C as readBlockConfig,i as sampleRUM,x as setup,S as toCamelCase,f as toClassName,E as updateSectionsStatus,D as waitForLCP,R as wrapTextNodes};
