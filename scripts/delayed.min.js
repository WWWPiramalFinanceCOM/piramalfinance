import{fetchPlaceholders as c,getMetadata as m,sampleRUM as u}from"./aem.js";u("cwv");function p(){"serviceWorker"in navigator?navigator.serviceWorker.register("../scripts/serviceworker.js").then(e=>{console.log("Service Worker registered.",e)}).catch(e=>{console.log("Service Worker **not** registered",e)}):console.log("Service workers are not supported in this browser.")}function h(){const e=document.createElement("script");e.innerHTML=`// Google Tag Manager 
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-T5MTVQ9');`,document.head.prepend(e)}function f(){const e=document.createElement("noscript"),t=document.createElement("iframe");t.src="https://www.googletagmanager.com/ns.html?id=GTM-T5MTVQ9",t.height="0",t.width="0",t.style.display="none",t.style.visibility="hidden",e.appendChild(t),document.body.prepend(e)}async function v(){const e=await c(),t=document.createElement("script");t.type="text/javascript";var n=e.monenageDc,a=e.monenageAppid,r=e.monegageDebuglog,o=e.monegageSdkversion;t.innerHTML=`
  console.log('MoEngage Web SDK');
  !function(e,n,i,t,a,r,o,d){if(!"${n}"||!"${n}".match(/^dc_[0-9]+$/gm))return console.error("Data center has not been passed correctly. Please follow the SDK installation instruction carefully.");var s=e[a]=e[a]||[];if(s.invoked=0,s.initialised>0||s.invoked>0)return console.error("MoEngage Web SDK initialised multiple times. Please integrate the Web SDK only once!"),!1;e.moengage_object=a;var l={},g=function n(i){return function(){for(var n=arguments.length,t=Array(n),a=0;a<n;a++)t[a]=arguments[a];(e.moengage_q=e.moengage_q||[]).push({f:i,a:t})}},u=["track_event","add_user_attribute","add_first_name","add_last_name","add_email","add_mobile","add_user_name","add_gender","add_birthday","destroy_session","add_unique_user_id","update_unique_user_id","moe_events","call_web_push","track","location_type_attribute"],m={onsite:["getData","registerCallback"]};for(var c in u)l[u[c]]=g(u[c]);for(var v in m)for(var f in m[v])null==l[v]&&(l[v]={}),l[v][m[v][f]]=g(v+"."+m[v][f]);r=n.createElement(i),o=n.getElementsByTagName("head")[0],r.async=1,r.src=t,o.appendChild(r),e.moe=e.moe||function(){return(s.invoked=s.invoked+1,s.invoked>1)?(console.error("MoEngage Web SDK initialised multiple times. Please integrate the Web SDK only once!"),!1):(d=arguments.length<=0?void 0:arguments[0],l)},r.addEventListener("load",function(){if(d)return e[a]=e.moe(d),e[a].initialised=e[a].initialised+1||1,!0}),r.addEventListener("error",function(){return console.error("Moengage Web SDK loading failed."),!1})}(window,document,"script","https://cdn.moengage.com/release/${n}/versions/${o}/moe_webSdk.min.latest.js","Moengage");`,document.head.append(t),Moengage=moe({app_id:a,debug_logs:r});try{let i=document.getElementById("moengage-container");if(!i)return!1;let s=document.querySelector(".nav-wrapper"),l=i.clientHeight;window.addEventListener("scroll",function(d){s.style.marginTop=`${l}px`,window.scrollY>50?s.style.marginTop="0px":s.style.marginTop=`${l}px`})}catch(i){console.warn("Moengage Error :: ",i)}}async function w(){const e=await c(),t=location.href;let n;t.includes("uatmarketing.piramalfinance")||t.includes("main--piramalfinance")?n=e.adobescriptstage:(t.includes("www.piramalfinance")||t.includes("main--prodpiramalfinance"))&&(n=e.adobescriptprod);const a=document.createElement("script");a.src=n,a.async=!0,document.head.appendChild(a)}const y=(e,t)=>{const n=new URL(e?.href)?.pathname,a=t.excludedpaths?.split(","),r=m("lang-path");if(n?.startsWith("/")&&!a.some(o=>n.startsWith(o)||n=="/")){const o=r?r+n:n;e.textContent.trim()?.startsWith("/")&&(e.textContent=o),e.href=o}},_=async()=>{const e=document.querySelectorAll("a"),t=await c();e.forEach(n=>{y(n,t);const a=n.href,r="rel";if(!a)return!1;const o=new URL(a),i=new URLSearchParams(o.search);if(i.has(r)){let l=function(d){const g=new URL(d);return g.searchParams.delete(r),g.toString()},s=i.get(r);s.includes(",")?n.rel=s.replaceAll(",",""):n.rel=s,n.href=l(a)}})};!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("author")&&(p(),h(),f(),v(),_(),w());
