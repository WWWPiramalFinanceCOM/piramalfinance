export function decorateRichtext(d=document){function c(t){delete t.dataset.richtextResource,delete t.dataset.richtextProp,delete t.dataset.richtextFilter,delete t.dataset.richtextLabel}let r;for(;r=d.querySelector("[data-richtext-prop]:not(div)");){const{richtextResource:t,richtextProp:a,richtextFilter:s,richtextLabel:n}=r.dataset;c(r);const l=[];let o=r;for(;(o=o.nextElementSibling)&&(o.dataset.richtextResource===t&&o.dataset.richtextProp===a);)c(o),l.push(o);let i;if(t&&a)i=document.querySelectorAll(`[data-richtext-id="${t}"][data-richtext-prop="${a}"]`);else{const e=r.closest("[data-aue-resource]");if(e)i=e.querySelectorAll(`:scope > :not([data-aue-resource]) [data-richtext-prop="${a}"]`);else{console.warn(`Editable parent not found or richtext property ${a}`);return}}if(i.length)console.warn("Found orphan elements of a richtext, that were not consecutive siblings of the first paragraph",i),i.forEach(e=>c(e));else{const e=document.createElement("div");t&&(e.dataset.aueResource=t,e.dataset.aueBehavior="component"),a&&(e.dataset.aueProp=a),n&&(e.dataset.aueLabel=n),s&&(e.dataset.aueFilter=s),e.dataset.aueType="richtext",r.replaceWith(e),e.append(r,...l)}}}const u=new MutationObserver(()=>decorateRichtext());u.observe(document,{attributeFilter:["data-richtext-prop"],subtree:!0}),decorateRichtext();
