import{ctaClick as u}from"../dl.min.js;import{sampleRUM as i,loadHeader as m,loadFooter as h,decorateButtons as y,decorateIcons as w,decorateSections as g,decorateBlocks as x,decorateTemplateAndTheme as A,waitForLCP as E,loadBlocks as L,loadCSS as l,fetchPlaceholders as S,getMetadata as d,getExtension as r}from"./aem.min.js;const $=[];export function createElement(e,t,o,n){const s=document.createElement(e);if(t){const a=typeof t=="string"?[t]:t;s.classList.add(...a)}if(o&&Object.keys(o).forEach(a=>{s.setAttribute(a,o[a])}),n){const a=c=>{c instanceof HTMLElement||c instanceof SVGElement?s.append(c):s.insertAdjacentHTML("beforeend",c)};Array.isArray(n)?n.forEach(a):a(n)}return s}const f=location.pathname.replace(".html","").split("/");export const targetObject={model:null,isMobile:window.matchMedia("(max-width: 767px)").matches,ctaPosition:"Top Menu Bar",ctaPosition:"Top Menu Bar",pageName:f[f.length-1]||"home-page",isTab:window.matchMedia("(max-width: 1024px)").matches};function v(e,t=""){e.querySelectorAll("a").forEach(n=>{const{href:s}=n;let a="";if(s.includes("/play.google.com-s/")?n.href=s.replace("play.google.com-s","play.google.com"):s.includes("/apps.apple.com-s/")?n.href=s.replace("apps.apple.com-s","apps.apple.com"):s.includes("play.google.com")?a="playstore":s.includes("apps.apple.com")&&(a="appstore"),a){n.textContent="";const c=document.createElement("img");c.src=`${window.hlx.codeBasePath}${t}/images/${a}.webp`,c.alt=n.title,c.loading="lazy",n.appendChild(c)}})}window.addEventListener("resize",()=>{targetObject.isTab=window.matchMedia("(max-width: 1024px)").matches});export async function decoratePlaceholder(e,t){try{const o=await S(t);return e.querySelectorAll("*").forEach((n,s)=>{n.firstChild instanceof Text&&Object.keys(o).forEach(a=>{const c=o[a];c&&c.trim()&&n.firstChild.textContent.trim()&&n.firstChild.textContent.includes(`{${a}}`)&&(n.innerHTML=n.firstChild.textContent.replaceAll(`{${a}}`,c))})}),e.innerHTML}catch(o){console.warn(o)}}export async function decorateAnchorTag(e){try{e.querySelectorAll("a").forEach(t=>{const{body:o}=document;H(t,o)})}catch(t){console.warn(t)}}async function p(){await l(`${window.hlx.codeBasePath}/styles/fonts${r("css")}`);try{window.location.hostname.includes("localhost")||sessionStorage.setItem("fonts-loaded","true")}catch{}}function C(e){e.addEventListener("click",async t=>{const o=t.target.closest("a");if(o&&o.href&&o.href.includes("/modals/")){t.preventDefault();const{openModal:n}=await import(`${window.hlx.codeBasePath}/blocks/modal/modal${r("js")}`);n(o.href)}})}function O(){}export async function decorateMain(e){decorateAnchorTag(e),decoratePlaceholder(e),y(e),w(e),g(e),x(e),v(e),handleReadAll(e)}async function B(e){document.documentElement.lang="en",A();const t=e.querySelector("main");t&&(decorateMain(t),await E($),await m(e.querySelector("header")),document.body.classList.add("appear"));try{(window.innerWidth>=900||sessionStorage.getItem("fonts-loaded"))&&p()}catch{}}async function T(e){C(e);const t=e.querySelector("main");await L(t);const{hash:o}=window.location,n=o?e.getElementById(o.substring(1)):!1;o&&n&&n.scrollIntoView(),h(e.querySelector("footer")),l(`${window.hlx.codeBasePath}/styles/lazy-styles.css`),p(),i("lazy"),i.observe(t.querySelectorAll("div[data-block-name]")),i.observe(t.querySelectorAll("picture > img"))}function b(){window.setTimeout(()=>import("./delayed.min.js),3e3);const e=new Event("load-event");document.dispatchEvent(e),import("./sidekick.min.js).then(({initSidekick:t})=>t())}async function M(e,t){try{const o=new Promise(s=>{l(`${window.hlx.codeBasePath}/templates/${t}/${t}${r("css")}`,s)}),n=new Promise(s=>{(async()=>{try{const a=await import(`../templates/${t}/${t}${r("js")}`);a.default&&await a.default(e)}catch(a){console.log(`failed to load module for ${t}`,a)}s()})()});await Promise.all([o,n])}catch(o){console.log(`failed to load block ${t}`,o)}}async function P(){const e=d("template");e?await M(document,e):await k(),await q(),await B(document),await T(document),b()}P();async function k(){const e=[];d("template")||e.push(`${window.hlx.codeBasePath}/styles/common/common${r("css")}`),e.forEach(async t=>{await l(t)})}async function q(){const e=`${window.hlx.codeBasePath}/styles/reset${r("css")}`;await l(e)}export function handleReadAll(e){try{e.querySelector(".section.carousel-articles-wrapper").querySelector(".default-content-wrapper p a").addEventListener("click",I)}catch{}}function I(e){try{if(e.target.closest(".section.read-all-dl")){const t=e.target.textContent.trim(),o=e.target.closest(".section").querySelector(".default-content-wrapper").querySelector("h1, h2, h3, h4, h5, h6").textContent.trim();u(t,"",o,targetObject.pageName)}}catch{console.log("read all not found Analytics")}}function R(e){return Array.from(e.classList).find(t=>t.startsWith("neeyat-button-"))?.replace("neeyat-button-","")||0}const H=(e,t)=>{e.innerHTML.includes("<sub>")&&(e.target="_blank"),e.href.includes("/modal-popup/")&&j(e,t)},j=(e,t)=>{const o=e.href.split("/").pop();e.dataset.modelId=o,targetObject.modelId=o,e.dataset.href=e.href,e.href="javascript:void(0)",e.addEventListener("click",n=>{n.preventDefault();const s=document.querySelectorAll(`.${o}`);targetObject.models=s,s.length&&(s.forEach(a=>{a.classList.add("dp-none"),a.remove(),t.prepend(a),a.classList.remove("dp-none"),a.classList.add("overlay");const c=a.querySelector("em");c?.innerHTML.includes(":cross-icon")&&(c.innerHTML="",c.addEventListener("click",()=>{a.classList.remove("overlay"),a.classList.add("dp-none")}))}),t.style.overflow="hidden")})};
